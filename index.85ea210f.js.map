{"mappings":"AAWO,IAAIA,EAXgBC,WACvB,IACI,MAAMC,QAAiBC,MAAM,iIAG7B,aAAaD,EAASE,OACxB,MAAOC,GACL,MAAMC,MAAMJ,SAASK,cAQ7BC,GAAcC,MAAKC,IACfC,aAAaC,QAAQ,SAAUC,KAAKC,UAAUJ,EAAOA,SACrD,MAAMK,EAAaJ,aAAaK,QAAQ,UACxChB,EAAca,KAAKI,MAAMF,MChBtB,MAAMG,EAAkBC,GACtBA,EACJC,KACC,EAACC,YACCA,EAAWC,MACXA,EACAC,KAAAC,EAAIC,aACJA,EAAYC,eACZA,EAAcC,UACdA,EACAC,GAAAC,EAAEC,aACFA,MAEA,IAAIC,EAEAC,EAAuBhC,EACxBiC,QAAO,EAACL,GAAEA,KAASD,EAAUO,SAASN,KACtCR,KAAI,EAACG,KAAEA,KAAWA,IAGnBQ,EADEC,EAAqBG,QAAU,EAClBH,EAAqBI,KAAK,MAGvCJ,EAAqBK,MAAM,EAAG,GAAGD,KAAK,MAAQ,UAElD,MAAME,EAAsBR,EAAaS,WACzC,MAAO,qDACmCV,gEACQA,gEACAA,0CAA2CR,WAC3FC,GAASE,gFAEuCK,MAChDP,GAASE,qEAE0CK,4DACPE,0IAIxBN,GAAgBC,GAChBW,MAAM,EAAG,gFACgCC,EAAoBD,MAAM,EAAE,8GAO9FD,KAAK,ICnDGI,EAAO,CAClBC,QAASC,SAASC,cAAc,YAChCC,KAAMF,SAASC,cAAc,qBAC7BE,WAAYH,SAASC,cAAc,2BACnCG,SAAUJ,SAASC,cAAc,gBACjCI,YAAaL,SAASC,cAAc,0BACpCK,YAAaN,SAASC,cAAc,wBACpCM,MAAOP,SAASC,cAAc,mBAC9BO,cAAeR,SAASC,cAAc,gBACtCQ,iBAAkBT,SAASC,cAAc,kBACzCS,YAAaV,SAASC,cAAc,iBACpCU,cAAeX,SAASC,cAAc,mBACtCW,WAAYZ,SAASC,cAAc,iBCZtB,MAAMY,EAMjBC,UACI,MAAMC,EAAO,GAEb,OADAA,EAAKC,OAAShB,SAASC,cAAc,WAC9Bc,EAGXE,OACIC,KAAKH,KAAKC,OAAOG,UAAUC,OAAO,aAGtCC,OACIH,KAAKH,KAAKC,OAAOG,UAAUG,IAAI,aAhBnCC,aAAYC,OAACA,GAAS,IAClBN,KAAKH,KAAOG,KAAKJ,UACjBU,GAAUN,KAAKG,QCEhB,IAAII,EAAe,CACtBC,YAAa,EACbC,iBAAkB,GAGf,MASDC,EAAW,IAAIC,sBAAqBC,IACxCA,EAAQC,SAAQC,IACVA,EAAMC,iBCnBqB1E,OAAO2E,IACxC,IACEA,EAAQjB,OACR,MAAMzD,QAAiBC,MACrB,kGAAkGgE,EAAaC,eAInH,OADAQ,EAAQb,OACD7D,EAASE,OAEd,MAAOC,GACP,MAAMC,MAAMJ,SAASK,cDiCzB,CAAoBsE,GAASpE,MAAKU,IAC9B,IACI,GAAGgD,EAAaC,cAAgBjD,EAAO2D,YAInC,OAHAtC,EAAKC,QAAQsC,mBAAmB,YAAa7D,EAAgBC,EAAO6D,UACpEC,OAAOC,MAAM,0EACbC,IAGJhB,EAAaC,aAAe,EAC5B5B,EAAKC,QAAQsC,mBAAmB,YAAa7D,EAAgBC,EAAO6D,UAEtE,MAAO3E,GACL+E,QAAQC,IAAIhF,OAnCd+E,QAAQC,IAAI,yBATM,CACtBC,WAAY,MACZC,UAAW,IAkBN,SAASJ,IACZb,EAASkB,UAAU9C,SAASC,cAAc,kBAJ1C2B,EAASmB,QAAQ/C,SAASC,cAAc,kBAQ5C,MAAMkC,EAAU,IAAItB,EAAQ,CAC1BG,OAAQ,UACRQ,QAAQ,IEpCH,MAAMwB,EAAmBzF,MAAMsB,IACpC,IACE,MAAMrB,QAAiBC,MAAM,oHACgFgE,EAAaE,8CAA8C9C,KAGxK,OAFA4C,EAAaE,kBAAoB,EACjCc,UACajF,EAASE,OACtB,MAAOC,GACP,MAAMC,MAAMJ,SAASK,cCGT,IAAIgD,EAAQ,CACxBG,OAAQ,UACRQ,QAAQ,ICXZ,MAAMyB,EAAU,IAAIpC,EAAQ,CAC1BG,OAAQ,UACRQ,QAAQ,IAEH,IAAI0B,EAAkB,GAE7BpD,EAAKI,KAAKiD,iBAAiB,UAAUC,IACnCA,EAAMC,iBAEN,IAAIC,EAAcF,EAAMG,OAAOC,SAASC,kBAAkBC,MAC1DR,EAAkBI,EAAYK,OAE9BX,EAAiBE,GAAiBnF,MAAKU,IACb,KAApByE,GAAoD,IAA1BzE,EAAO6D,QAAQ7C,QAC3CK,EAAKK,WAAWgB,UAAUC,OAAO,iCACjCpB,SAAS4D,eAAe,UAAUC,QAClCC,YAAW,KACThE,EAAKK,WAAWgB,UAAUG,IAAI,mCAC7B,OAEHxB,EAAKC,QAAQgE,UAAYvF,EAAgBC,EAAO6D,SAElDW,EAAQhC,UAOY,IAAIY,sBAAqBC,IAC7CA,EAAQC,SAAQC,IACVA,EAAMC,iBDhBZQ,IACAO,EAAiBE,GAAiBnF,MAAKU,IAEnC,IACIqB,EAAKC,QAAQsC,mBAAmB,YAAa7D,EAAgBC,EAAO6D,UAEtE,MAAO3E,GACL+E,QAAQC,IAAIhF,aCGE,CACtBiF,WAAY,SACZC,UAAW,IAUCE,QAAQ/C,SAASC,cAAc,qBC5C/C,MAAM+D,EAAchE,SAAS4D,eAAe,aACtCK,EAAUjE,SAASC,cAAc,eCDhC,SAASiE,EAAeC,GAC7B,MAAM/E,aACJA,EAAYgF,WACZA,EAAUpG,OACVA,EAAMqG,eACNA,EAAczF,MACdA,EAAKD,YACLA,EAAW2F,cACXA,EAAaC,WACbA,EAAUC,SACVA,EAAQtF,GACRA,GACEiF,EAIJ,MAAO,8DAA8DxF,qBAA+BO,kFAElEN,4LAIWQ,uCAAkDgF,wJARpEG,EAAW1E,WAYDF,MAAM,EAAG,sJAI5B0E,GAAkCC,4IAKtCtG,EAASA,EAAOU,KAAI+F,GAASA,EAAM5F,OAAMc,MAAM,EAAG,GAAK,gJAK9B6E,8DCzBlC,IAAIE,EAyBX,SAASC,IACPpC,OAAOqC,oBAAoB,UAAWC,GACtC/E,EAAKM,SAASe,UAAUC,OAAO,cAGjC,SAAS0D,EAAgBC,GACnBA,EAAEC,gBAAkBD,EAAExB,QACxBoB,IAIJ,SAASE,EAAcE,GACA,WACjBA,EAAEE,MACJN,IFpDJX,EAAYb,iBAAiB,SAE7B,SAAmBC,GACjBA,EAAMC,iBACNY,EAAQ9C,UAAU+D,OAAO,mBACzBjB,EAAQd,iBAAiB,cGP3BZ,OAAO4C,OAAS,WACZnF,SAASoF,KAAKjE,UAAUG,IAAI,iBAC5BiB,OAAOuB,YAAW,WAChB9D,SAASoF,KAAKjE,UAAUG,IAAI,UAC5BtB,SAASoF,KAAKjE,UAAUC,OAAO,mBAC9B,MDWPtB,EAAKC,QAAQoD,iBAAiB,SAAS4B,IACrCA,EAAE1B,iBAbJ9F,eAAuB2B,GACrB,IAKE,aAJuBzB,MACrB,sCAAsCyB,+CAElBxB,OAEtB,MAAOC,GACP+E,QAAQC,IAAIhF,EAAM0H,UAMpBC,CAAQP,EAAExB,OAAOgC,QAAQrG,IACtBnB,MAAKoG,IACJO,EAAaP,EACbrE,EAAKS,MAAMwD,UAAY,GACvByB,IACAC,IAaJlD,OAAOY,iBAAiB,UAAW0B,GACnC/E,EAAKM,SAASe,UAAUG,IAAI,cAZxBxB,EAAKS,MAAM8B,mBAAmB,aAAc6B,EAAeC,IAC3DrE,EAAKM,SAAS+C,iBAAiB,QAAS2B,GACxChF,EAAKU,cAAc2C,iBAAiB,QAASwB,GAC7C7E,EAAKW,iBAAiB0C,iBAAiB,QAASuC,MAEjDC,OAAMhI,IACL+E,QAAQC,IAAIhF,SEPlB,IAAIiI,EAAW,GACXC,EAAW,GACR,SAASL,IACVvH,aAAaK,QAAQ,WACvBsH,EAAWzH,KAAKI,MAAMN,aAAaK,QAAQ,WAEzCL,aAAaK,QAAQ,WACvBuH,EAAW1H,KAAKI,MAAMN,aAAaK,QAAQ,WAGxC,SAASoH,EAAaX,GACA,0BAAvBA,EAAExB,OAAOuC,UAIc,wBAAvBf,EAAExB,OAAOuC,WAoDf,WACE,GAAqC,iBAAjChG,EAAKQ,YAAYyF,YAInB,OAHAC,IACAH,EAASI,KAAKvB,QACdzG,aAAaC,QAAQ,QAASC,KAAKC,UAAUyH,IAG/C,GAAqC,sBAAjC/F,EAAKQ,YAAYyF,YAAqC,CACxDG,IACA,IAAK,MAAMC,KAAWN,EACpB,GAAIM,EAAQjH,KAAOwF,EAAWxF,GAAI,CAChC,MAAMkH,EAAcP,EAASQ,QAAQF,GACbN,EAASS,OAAOF,EAAa,GACrDnI,aAAaC,QAAQ,QAASC,KAAKC,UAAUyH,MAhEjDU,GAqBJ,WAEE,GADA7D,QAAQC,IAAI+B,GACyB,mBAAjC5E,EAAKO,YAAY0F,YAInB,OAHAS,IACAZ,EAASK,KAAKvB,QACdzG,aAAaC,QAAQ,QAASC,KAAKC,UAAUwH,IAG/C,GAAqC,sBAAjC9F,EAAKO,YAAY0F,YAAqC,CACxDU,IACA,IAAK,MAAMN,KAAWP,EACpB,GAAIO,EAAQjH,KAAOwF,EAAWxF,GAAI,CAChC,MAAMkH,EAAcR,EAASS,QAAQF,GACbP,EAASU,OAAOF,EAAa,GACrDnI,aAAaC,QAAQ,QAASC,KAAKC,UAAUwH,MAvCjDc,GAQG,SAASjB,IACdgB,IACAP,IACA,IAAK,MAAMC,KAAWP,EACpB,GAAIO,EAAQjH,KAAOwF,EAAWxF,GAAI,CAChCsH,IACA,MAGJ,IAAK,MAAMG,KAAWd,EACpB,GAAIc,EAAQzH,KAAOwF,EAAWxF,GAAI,CAChC8G,IACA,OAyBN,SAASQ,IACP1G,EAAKO,YAAYuG,MAAMC,gBAAkB,MACzC/G,EAAKO,YAAY0F,YAAc,oBAGjC,SAASU,IACP3G,EAAKO,YAAYuG,MAAMC,gBAAkB,UACzC/G,EAAKO,YAAY0F,YAAc,iBAsBjC,SAASC,IACPlG,EAAKQ,YAAYsG,MAAMC,gBAAkB,OACzC/G,EAAKQ,YAAYyF,YAAc,oBAGjC,SAASG,IACPpG,EAAKQ,YAAYsG,MAAMC,gBAAkB,QACzC/G,EAAKQ,YAAYyF,YAAc","sources":["src/js/fetchGenres.js","src/js/createMovieCard.js","src/js/refs.js","src/js/spinner.js","src/js/infinityScroll.js","src/js/fetchTrendingMovies.js","src/js/fetchQueryMovies.js","src/js/infinityScrollQuery.js","src/js/app.js","src/js/modalTeam.js","src/js/buildModalMarcup.js","src/js/renderOpenModal.js","src/js/preloader.js","src/js/localstorage.js"],"sourcesContent":["export const fetchGenres = async () => {\n    try {\n        const response = await fetch(`\n            https://api.themoviedb.org/3/genre/movie/list?api_key=ff98b74c6ada2972698b8eff6707845a&language=en-US\n        `);\n        return await response.json();\n    } catch (error) {\n        throw Error(response.statusText);\n    }\n}\n\nexport let localGenres;\n\n\n\nfetchGenres().then(genres => {\n    localStorage.setItem(\"genres\", JSON.stringify(genres.genres));\n    const saveGenres = localStorage.getItem(\"genres\");\n    localGenres = JSON.parse(saveGenres);\n});\n\n// if (localStorage.getItem(\"genres\")) {\n//     return;\n// } else {\n//     fetchGenres().then(genres => {\n//         localStorage.setItem(\"genres\", JSON.stringify(genres.genres));\n//         const saveGenres = localStorage.getItem(\"genres\");\n//         localGenres = JSON.parse(saveGenres);\n//     });\n    \n// }","import { localGenres } from './fetchGenres';\n\nexport const createMovieCard = movies => {\n  return movies\n    .map(\n      ({\n        poster_path,\n        title,\n        name,\n        release_date,\n        first_air_date,\n        genre_ids,\n        id,\n        vote_average,\n      }) => {\n        let moviesGenres;\n\n        let moviesGenresFindName = localGenres\n          .filter(({ id }) => genre_ids.includes(id))\n          .map(({ name }) => name);\n\n        if (moviesGenresFindName.length <= 2) {\n          moviesGenres = moviesGenresFindName.join(', ');\n        } else {\n          moviesGenres =\n            moviesGenresFindName.slice(0, 2).join(', ') + ', Other';\n        }\n        const voteAverageToString = vote_average.toString();\n        return `\n                <li class=\"card__item\" data-id=\"${id}\">\n                    <a class=\"card card__link\" data-id=\"${id}\">\n                        <img class=\"card__img\" data-id=\"${id}\" src='https://image.tmdb.org/t/p/w500${poster_path}' alt='${\n          title || name\n        }' loading=\"lazy\"/>\n                        <p class=\"card__title\" data-id=\"${id}\">${\n          title || name\n        }</p>\n                        <div class=\"card__inform\" data-id=\"${id}\">\n                            <p class=\"card__genres\">${moviesGenres}</p>\n                            <p class=\"card__date\">\n                              <span></span>| \n                            ${(\n                              release_date || first_air_date\n                            ).slice(0, 4)}</p>\n                            <span class=\"card__vote visually-hidden\">${voteAverageToString.slice(0,3)}</span>\n                        </div>\n                    </a>\n                </li>\n            `;\n      }\n    )\n    .join('');\n};\n","export const refs = {\n  gallery: document.querySelector('.gallery'),\n  form: document.querySelector('.navigation__form'),\n  notificate: document.querySelector('.navigation__notificate'),\n  backdrop: document.querySelector('.js-backdrop'),\n  watchButton: document.querySelector('.button-watched__modal'),\n  queueButton: document.querySelector('.button-queue__modal'),\n  modal: document.querySelector('.modal__content'),\n  closeModalBtn: document.querySelector('.modal-close'),\n  buttonsContainer: document.querySelector('.buttons-modal'),\n  queueBtnLib: document.querySelector('.button-queue'),\n  watchedBtnLib: document.querySelector('.button-watched'),\n  galleryLib: document.querySelector('.gallery-lib'),\n};\n","export default class Spinner {\n    constructor({hidden = false}) {\n        this.refs = this.getRefs();\n        hidden && this.hide();\n    }\n\n    getRefs() {\n        const refs = {};\n        refs.loader = document.querySelector('.loader');\n        return refs;\n    }\n\n    show() {\n        this.refs.loader.classList.remove('is-hidden');\n    }\n\n    hide() {\n        this.refs.loader.classList.add('is-hidden')\n    }\n};\n","import {createMovieCard} from './createMovieCard';\nimport { fetchTrendingMovies } from './fetchTrendingMovies';\nimport { refs } from './refs';\nimport Spinner from './spinner';\n\nexport let fetchOptions = {\n    currentPage: 1,\n    currentQueryPage: 1,\n};\n\nexport const resetPage = () => {\n    fetchOptions.currentPage = 1;\n}\n\nconst observerOptions = {\n  rootMargin: '0px',\n  threshold: 1.0,\n};\n\nconst observer = new IntersectionObserver(entries => {\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      onLoadMore();\n      console.log('is intersecting');\n    }\n  });\n}, observerOptions);\n\nsetObserverOn();\n\nexport function setObserverOn() {\n    observer.observe(document.querySelector('.scroll-check'));\n};\n    \nexport function setObserverOff() {\n    observer.unobserve(document.querySelector('.scroll-check'));\n};\n\n\nconst spinner = new Spinner({\n  loader: '.loader',\n  hidden: true,\n});\n\nfunction onLoadMore() {\n\nfetchTrendingMovies(spinner).then(movies => {\n    try {\n        if(fetchOptions.currentPage === movies.total_pages) {\n            refs.gallery.insertAdjacentHTML('beforeend', createMovieCard(movies.results));\n            window.alert('Sorry this is the last page, we do not have any movies for you :(');\n            setObserverOff();\n            return ;\n        }\n        fetchOptions.currentPage += 1;\n        refs.gallery.insertAdjacentHTML('beforeend', createMovieCard(movies.results));\n\n    } catch (error) {\n        console.log(error);\n    }\n});\n}\n\n","import { fetchOptions } from './infinityScroll'\n\nexport const fetchTrendingMovies = async (spinner) => {\n  try {\n    spinner.show()\n    const response = await fetch(\n      `https://api.themoviedb.org/3/trending/movie/week?api_key=ff98b74c6ada2972698b8eff6707845a&page=${fetchOptions.currentPage}`\n\n    );\n  spinner.hide()\n  return response.json();\n\n  } catch (error) {\n    throw Error(response.statusText);\n  }\n};\n\n\n// fetchTrendingMovies().then(movies => console.log(movies.results));\n","// API Key: ff98b74c6ada2972698b8eff6707845a\n// Get trending\nimport { fetchOptions } from './infinityScroll';\nimport { setObserverOff } from './infinityScroll';\n\nexport const fetchQueryMovies = async name => {\n  try {\n    const response = await fetch(`\n        https://api.themoviedb.org/3/search/movie?api_key=ff98b74c6ada2972698b8eff6707845a&language=en-US&page=${fetchOptions.currentQueryPage}&include_adult=false&query=${name}`);\n    fetchOptions.currentQueryPage += 1;\n    setObserverOff();\n    return await response.json();\n  } catch (error) {\n    throw Error(response.statusText);\n  }\n};\n","import {createMovieCard} from './createMovieCard';\nimport { fetchQueryMovies } from './fetchQueryMovies';\nimport {refs} from './refs';\nimport Spinner from './spinner';\nimport { searchMovieTrim} from './app';\nimport { setObserverOff } from './infinityScroll';\n\nexport let fetchOptions = {\n    currentPage: 1,\n    currentQueryPage: 1,\n};\n\nexport const resetQueryPage = () => {\n    fetchOptions.currentQueryPage = 1;\n}\n\nconst spinner = new Spinner({\n    loader: '.loader',\n    hidden: true,\n})\n\nexport function onLoadMoreQuery() {\n    setObserverOff();\n    fetchQueryMovies(searchMovieTrim).then(movies => {\n        \n        try {\n            refs.gallery.insertAdjacentHTML('beforeend', createMovieCard(movies.results));\n                \n        } catch (error) {\n            console.log(error);\n        }\n    });\n}","import { fetchQueryMovies } from './fetchQueryMovies';\nimport { createMovieCard } from './createMovieCard';\nimport { refs } from './refs';\nimport Spinner from './spinner';\nimport { resetPage } from './infinityScroll';\nimport { onLoadMoreQuery } from './infinityScrollQuery';\n\nconst spinner = new Spinner({\n  loader: '.loader',\n  hidden: true,\n});\nexport let searchMovieTrim = '';\n\nrefs.form.addEventListener('submit', event => {\n  event.preventDefault();\n\n  let searchMovie = event.target.elements.navigation__input.value;\n  searchMovieTrim = searchMovie.trim();\n\n  fetchQueryMovies(searchMovieTrim).then(movies => {\n    if (searchMovieTrim === '' || movies.results.length === 0) {\n      refs.notificate.classList.remove('navigation__notificate-hidden');\n      document.getElementById('myForm').reset();\n      setTimeout(() => {\n        refs.notificate.classList.add('navigation__notificate-hidden');\n      }, 2500);\n    } else {\n      refs.gallery.innerHTML = createMovieCard(movies.results);\n    }\n    spinner.show();\n  });\n\n  const observerOptions = {\n    rootMargin: '-100px',\n    threshold: 1.0,\n  };\n  const observerQuery = new IntersectionObserver(entries => {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        onLoadMoreQuery();\n      }\n    });\n  }, observerOptions);\n\n  observerQuery.observe(document.querySelector('.scroll-check'));\n});\n","const modalLinkEl = document.getElementById('modalTeam');\nconst modalEl = document.querySelector('.modal-team');\nmodalLinkEl.addEventListener('click', modalOpen);\n\nfunction modalOpen(event) {\n  event.preventDefault();\n  modalEl.classList.toggle('visually-hidden');\n  modalEl.addEventListener('keydown');\n}\n\n// function modalClose() {\n//   if (modalEl.classList.contains('visually-hidden') === false) {\n//     console.log('modal');\n//   }\n//   console.log('modal is close');\n// }\n","export function openModalMovie(data) {\n  const {\n    vote_average,\n    vote_count,\n    genres,\n    original_title,\n    title,\n    poster_path,\n    original_name,\n    popularity,\n    overview,\n    id,\n  } = data;\n\n  const popularityToString = popularity.toString();\n\n  return `<img class=\"img-modal\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"\" data-id=${id} />\n        <div class=\"container-modal\">\n          <h1 class=\"title-modal\">${title}</h1>\n          <table class=\"table\">\n            <tr class=\"table-separator\">\n              <th class=\"table__text\">Vote / Votes</th>\n              <th><span class=\"vote-average\">${vote_average}</span> / <span class=\"vote-count\">${vote_count}</span></th>\n            </tr>\n            <tr class=\"table-separator\">\n              <th class=\"table__text\">Popularity</th>\n              <th>${popularityToString.slice(0, 5)}</th>\n            </tr>\n            <tr class=\"table-separator\">\n              <th class=\"table__text\">Original Title</th>\n              <th>${original_title ? original_title : original_name}</th>\n            </tr>\n            <tr class=\"table-separator\">\n              <th class=\"table__text\">Genre</th>\n              <th>${\n                genres ? genres.map(genre => genre.name).slice(0, 2) : ' '\n              }</th>\n            </tr>\n          </table>\n          <h2 class=\"title-about__modal\">ABOUT</h2>\n          <p class=\"about-text__modal\">${overview}\n          </p>\n        </div>\n      </div>\n    </div>`;\n}\n","import { refs } from './refs';\nimport { openModalMovie } from './buildModalMarcup';\nimport { checkStorage, addToStorage, watchButtDisOrEn } from './localstorage';\n\nasync function request(id) {\n  try {\n    const response = await fetch(\n      `https://api.themoviedb.org/3/movie/${id}?api_key=deeaaa6f7bb1ec2c1571c017660b3676`\n    );\n    const film = response.json();\n    return film;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\nexport let cardObject;\nrefs.gallery.addEventListener('click', e => {\n  e.preventDefault();\n  request(e.target.dataset.id)\n    .then(data => {\n      cardObject = data;\n      refs.modal.innerHTML = '';\n      checkStorage();\n      watchButtDisOrEn();\n      onOpenModal();\n      refs.modal.insertAdjacentHTML('afterbegin', openModalMovie(data));\n      refs.backdrop.addEventListener('click', onBackdropClick);\n      refs.closeModalBtn.addEventListener('click', offCloseModal);\n      refs.buttonsContainer.addEventListener('click', addToStorage);\n    })\n    .catch(error => {\n      console.log(error);\n    });\n});\n\nfunction onOpenModal() {\n  window.addEventListener('keydown', onEscKeyPress);\n  refs.backdrop.classList.add('show-modal');\n}\n\nfunction offCloseModal() {\n  window.removeEventListener('keydown', onEscKeyPress);\n  refs.backdrop.classList.remove('show-modal');\n}\n\nfunction onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    offCloseModal();\n  }\n}\n\nfunction onEscKeyPress(e) {\n  const ESC_KEY_CODE = 'Escape';\n  if (e.code === ESC_KEY_CODE) {\n    offCloseModal();\n  }\n}\n","window.onload = function () {\n    document.body.classList.add('loaded_hiding');\n    window.setTimeout(function () {\n      document.body.classList.add('loaded');\n      document.body.classList.remove('loaded_hiding');\n    }, 1000);\n  }","import { refs } from './refs';\nimport { cardObject } from './renderOpenModal';\n// export { checkStorage, addToStorage, watchButtDisOrEn, cardObject };\n// refs.gallery.addEventListener('click', e => {\n//   e.preventDefault();\n//   request(e.target.dataset.id)\n//     .then(data => {\n//       cardObject = data; //add const\n//       refs.modal.innerHTML = '';\n//       checkStorage(); //add func\n//       watchButtDisOrEn(); //add func\n//       onOpenModal();\n//       refs.modal.insertAdjacentHTML('afterbegin', createFilmCard(data));\n//       refs.backdrop.addEventListener('click', onBackdropClick);\n//       refs.buttonsContainer.addEventListener('click', addToStorage); // add this\n//     })\n//     .catch(error => {\n//       console.log(error);\n//     });\n// });\n\n//\n// export let cardObject = {};\n\nlet watchArr = [];\nlet queueArr = [];\nexport function checkStorage() {\n  if (localStorage.getItem('Watch')) {\n    watchArr = JSON.parse(localStorage.getItem('Watch'));\n  }\n  if (localStorage.getItem('Queue')) {\n    queueArr = JSON.parse(localStorage.getItem('Queue'));\n  }\n}\nexport function addToStorage(e) {\n  if (e.target.className === 'button-watched__modal') {\n    addToWatchStorage();\n    return;\n  }\n  if (e.target.className === 'button-queue__modal') {\n    addToQueueStorage();\n    return;\n  }\n}\nexport function watchButtDisOrEn() {\n  toAddWatchButt();\n  toAddQueueButt();\n  for (const storage of watchArr) {\n    if (storage.id === cardObject.id) {\n      toRemoveWatchButt();\n      break;\n    }\n  }\n  for (const storage of queueArr) {\n    if (storage.id === cardObject.id) {\n      toRemoveQueueButt();\n      break;\n    }\n  }\n}\n///watch-Fn\nfunction addToWatchStorage() {\n  console.log(cardObject);\n  if (refs.watchButton.textContent === 'ADD TO WATCHED') {\n    toRemoveWatchButt();\n    watchArr.push(cardObject);\n    localStorage.setItem('Watch', JSON.stringify(watchArr));\n    return;\n  }\n  if (refs.watchButton.textContent === 'REMOVE FROM WATCH') {\n    toAddWatchButt();\n    for (const storage of watchArr) {\n      if (storage.id === cardObject.id) {\n        const removeIndex = watchArr.indexOf(storage);\n        const removedWatchArr = watchArr.splice(removeIndex, 1);\n        localStorage.setItem('Watch', JSON.stringify(watchArr));\n      }\n    }\n  }\n}\n\nfunction toRemoveWatchButt() {\n  refs.watchButton.style.backgroundColor = 'red';\n  refs.watchButton.textContent = 'REMOVE FROM WATCH';\n}\n\nfunction toAddWatchButt() {\n  refs.watchButton.style.backgroundColor = '#FF6B01';\n  refs.watchButton.textContent = 'ADD TO WATCHED';\n}\n////Queue-Fn\nfunction addToQueueStorage() {\n  if (refs.queueButton.textContent === 'ADD TO QUEUE') {\n    toRemoveQueueButt();\n    queueArr.push(cardObject);\n    localStorage.setItem('Queue', JSON.stringify(queueArr));\n    return;\n  }\n  if (refs.queueButton.textContent === 'REMOVE FROM QUEUE') {\n    toAddQueueButt();\n    for (const storage of queueArr) {\n      if (storage.id === cardObject.id) {\n        const removeIndex = queueArr.indexOf(storage);\n        const removedWatchArr = queueArr.splice(removeIndex, 1);\n        localStorage.setItem('Queue', JSON.stringify(queueArr));\n      }\n    }\n  }\n}\n\nfunction toRemoveQueueButt() {\n  refs.queueButton.style.backgroundColor = 'pink';\n  refs.queueButton.textContent = 'REMOVE FROM QUEUE';\n}\n\nfunction toAddQueueButt() {\n  refs.queueButton.style.backgroundColor = 'white';\n  refs.queueButton.textContent = 'ADD TO QUEUE';\n}\n"],"names":["$5844b68ee09a1fe1$export$51d062533fa741c4","async","response","fetch","json","error","Error","statusText","$5844b68ee09a1fe1$export$e95d448b93b2cdb","then","genres","localStorage","setItem","JSON","stringify","saveGenres","getItem","parse","$9134abd8877f9bb7$export$9d27b867a89df126","movies","map","poster_path","title","name","name1","release_date","first_air_date","genre_ids","id","id1","vote_average","moviesGenres","moviesGenresFindName","filter","includes","length","join","slice","voteAverageToString","toString","$ee27a4d7c64fc8c4$export$21666b427502ea6d","gallery","document","querySelector","form","notificate","backdrop","watchButton","queueButton","modal","closeModalBtn","buttonsContainer","queueBtnLib","watchedBtnLib","galleryLib","$00cfbbdd8a53f936$export$2e2bcd8739ae039","getRefs","refs","loader","show","this","classList","remove","hide","add","constructor","hidden","$2ce415f148c0c897$export$e12dbb0aa5635c44","currentPage","currentQueryPage","$2ce415f148c0c897$var$observer","IntersectionObserver","entries","forEach","entry","isIntersecting","spinner","$2ce415f148c0c897$var$spinner","total_pages","insertAdjacentHTML","results","window","alert","$2ce415f148c0c897$export$83528705734bea0e","console","log","rootMargin","threshold","unobserve","observe","$eeb1a3c6a97310e8$export$908f733cb80721a6","$ce77af30fc9a6e63$var$spinner","$ce77af30fc9a6e63$export$b20e827591442787","addEventListener","event","preventDefault","searchMovie","target","elements","navigation__input","value","trim","getElementById","reset","setTimeout","innerHTML","$7ecca67214b608f8$var$modalLinkEl","$7ecca67214b608f8$var$modalEl","$0b805b67754fd9d5$export$3c9e96c8bb4f4ee4","data","vote_count","original_title","original_name","popularity","overview","genre","$0a74a33e2a19043d$export$5e885b3c72a6c9f7","$0a74a33e2a19043d$var$offCloseModal","removeEventListener","$0a74a33e2a19043d$var$onEscKeyPress","$0a74a33e2a19043d$var$onBackdropClick","e","currentTarget","code","toggle","onload","body","message","$0a74a33e2a19043d$var$request","dataset","$89a4baeedb6cdec9$export$cead25c4f636f79","$89a4baeedb6cdec9$export$4e97e39014f13610","$89a4baeedb6cdec9$export$aaedbcfc86e6cb5e","catch","$89a4baeedb6cdec9$var$watchArr","$89a4baeedb6cdec9$var$queueArr","className","textContent","$89a4baeedb6cdec9$var$toRemoveQueueButt","push","$89a4baeedb6cdec9$var$toAddQueueButt","storage","removeIndex","indexOf","splice","$89a4baeedb6cdec9$var$addToQueueStorage","$89a4baeedb6cdec9$var$toRemoveWatchButt","$89a4baeedb6cdec9$var$toAddWatchButt","$89a4baeedb6cdec9$var$addToWatchStorage","storage1","style","backgroundColor"],"version":3,"file":"index.85ea210f.js.map"}