let t;(async()=>{try{const t=await fetch("\n            https://api.themoviedb.org/3/genre/movie/list?api_key=ff98b74c6ada2972698b8eff6707845a&language=en-US\n        ");return await t.json()}catch(t){throw Error(response.statusText)}})().then((e=>{localStorage.setItem("genres",JSON.stringify(e.genres));const n=localStorage.getItem("genres");t=JSON.parse(n)}));const e=e=>e.map((({poster_path:e,title:n,name:a,release_date:o,first_air_date:r,genre_ids:s,id:i,vote_average:c})=>{let l,d=t.filter((({id:t})=>s.includes(t))).map((({name:t})=>t));l=d.length<=2?d.join(", "):d.slice(0,2).join(", ")+", Other";const u=c.toString();return`\n                <li class="card__item" data-id="${i}">\n                    <a class="card card__link" data-id="${i}">\n                        <img class="card__img" data-id="${i}" src='https://image.tmdb.org/t/p/w500${e}' alt='${n||a}' loading="lazy"/>\n                        <p class="card__title" data-id="${i}">${n||a}</p>\n                        <div class="card__inform" data-id="${i}">\n                            <p class="card__genres">${l}</p>\n                            <p class="card__date">\n                              <span></span>| \n                            ${(o||r).slice(0,4)}</p>\n                            <span class="card__vote visually-hidden">${u.slice(0,3)}</span>\n                        </div>\n                    </a>\n                </li>\n            `})).join(""),n=async t=>{try{const e=await fetch(`\n        https://api.themoviedb.org/3/search/movie?api_key=ff98b74c6ada2972698b8eff6707845a&language=en-US&page=1&include_adult=false&query=${t}\n            `);return await e.json()}catch(t){throw Error(response.statusText)}},a={gallery:document.querySelector(".gallery"),form:document.querySelector(".navigation__form"),notificate:document.querySelector(".navigation__notificate"),backdrop:document.querySelector(".js-backdrop"),watchButton:document.querySelector(".button-watched__modal"),queueButton:document.querySelector(".button-queue__modal"),modal:document.querySelector(".modal__content"),closeModalBtn:document.querySelector(".modal-close"),buttonsContainer:document.querySelector(".buttons-modal"),queueBtnLib:document.querySelector(".button-queue"),watchedBtnLib:document.querySelector(".button-watched"),galleryLib:document.querySelector(".gallery-lib")};class o{getRefs(){const t={};return t.loader=document.querySelector(".loader"),t}show(){this.refs.loader.classList.remove("is-hidden")}hide(){this.refs.loader.classList.add("is-hidden")}constructor({hidden:t=!1}){this.refs=this.getRefs(),t&&this.hide()}}let r={currentPage:1};const s=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&(c().then((t=>{try{r.currentPage+=1,a.gallery.insertAdjacentHTML("beforeend",e(t.results)),i.hide()}catch(t){console.log(t)}})),console.log("is intersecting"))}))}),{rootMargin:"0px",threshold:1});s.observe(document.querySelector(".scroll-check"));const i=new o({loader:".loader",hidden:!0});const c=async()=>{try{return(await fetch("https://api.themoviedb.org/3/trending/movie/week?api_key=ff98b74c6ada2972698b8eff6707845a")).json()}catch(t){throw Error(response.statusText)}},l=new o({loader:".loader",hidden:!0});a.form.addEventListener("submit",(t=>{t.preventDefault();const o=t.target.elements.navigation__input.value.trim();n(o).then((t=>{""===o||0===t.results.length?(a.notificate.classList.remove("navigation__notificate-hidden"),document.getElementById("myForm").reset(),setTimeout((()=>{a.notificate.classList.add("navigation__notificate-hidden")}),2500)):a.gallery.innerHTML=e(t.results),l.show()}))}));const d=document.getElementById("modalTeam"),u=document.querySelector(".modal-team");function h(t){const{vote_average:e,vote_count:n,genres:a,original_title:o,title:r,poster_path:s,original_name:i,popularity:c,overview:l,id:d}=t;return`\n        <img class="img-modal" src="https://image.tmdb.org/t/p/w500${s}" alt="" data-id=${d} />\n        <div class="container-modal">\n          <h1 class="title-modal">${r}</h1>\n          <table class="table">\n            <tr>\n              <th class="table__text">Vote / Votes</th>\n              <th><span class="vote-average">${e}</span> / <span class="vote-count">${n}</span></th>\n            </tr>\n            <tr>\n              <th class="table__text">Popularity</th>\n              <th>${c}</th>\n            </tr>\n            <tr>\n              <th class="table__text">Original Title</th>\n              <th>${o||i}</th>\n            </tr>\n            <tr>\n              <th class="table__text">Genre</th>\n              <th>${a?a.map((t=>t.name)):" "}</th>\n            </tr>\n          </table>\n          <h2 class="title-about__modal">ABOUT</h2>\n          <p class="about-text__modal">${l}\n          </p>\n        </div>\n      </div>\n    </div>`}let g;function m(){window.removeEventListener("keydown",_),a.backdrop.classList.remove("show-modal")}function f(t){t.currentTarget===t.target&&m()}function _(t){"Escape"===t.code&&m()}d.addEventListener("click",(function(t){t.preventDefault(),u.classList.toggle("visually-hidden"),u.addEventListener("keydown")})),window.onload=function(){document.body.classList.add("loaded_hiding"),window.setTimeout((function(){document.body.classList.add("loaded"),document.body.classList.remove("loaded_hiding")}),1e3)},a.gallery.addEventListener("click",(t=>{t.preventDefault(),async function(t){try{return(await fetch(`https://api.themoviedb.org/3/movie/${t}?api_key=deeaaa6f7bb1ec2c1571c017660b3676`)).json()}catch(t){console.log(t.message)}}(t.target.dataset.id).then((t=>{g=t,a.modal.innerHTML="",b(),w(),window.addEventListener("keydown",_),a.backdrop.classList.add("show-modal"),a.modal.insertAdjacentHTML("afterbegin",h(t)),a.backdrop.addEventListener("click",f),a.closeModalBtn.addEventListener("click",m),a.buttonsContainer.addEventListener("click",v)})).catch((t=>{console.log(t)}))}));let p=[],y=[];function b(){localStorage.getItem("Watch")&&(p=JSON.parse(localStorage.getItem("Watch"))),localStorage.getItem("Queue")&&(y=JSON.parse(localStorage.getItem("Queue")))}function v(t){"button-watched__modal"!==t.target.className?"button-queue__modal"!==t.target.className||function(){if("ADD TO QUEUE"===a.queueButton.textContent)return k(),y.push(g),void localStorage.setItem("Queue",JSON.stringify(y));if("REMOVE FROM QUEUE"===a.queueButton.textContent){q();for(const t of y)if(t.id===g.id){const e=y.indexOf(t);y.splice(e,1);localStorage.setItem("Queue",JSON.stringify(y))}}}():function(){if(console.log(g),"ADD TO WATCHED"===a.watchButton.textContent)return S(),p.push(g),void localStorage.setItem("Watch",JSON.stringify(p));if("REMOVE FROM WATCH"===a.watchButton.textContent){E();for(const t of p)if(t.id===g.id){const e=p.indexOf(t);p.splice(e,1);localStorage.setItem("Watch",JSON.stringify(p))}}}()}function w(){E(),q();for(const t of p)if(t.id===g.id){S();break}for(const t of y)if(t.id===g.id){k();break}}function S(){a.watchButton.style.backgroundColor="red",a.watchButton.textContent="REMOVE FROM WATCH"}function E(){a.watchButton.style.backgroundColor="#FF6B01",a.watchButton.textContent="ADD TO WATCHED"}function k(){a.queueButton.style.backgroundColor="pink",a.queueButton.textContent="REMOVE FROM QUEUE"}function q(){a.queueButton.style.backgroundColor="white",a.queueButton.textContent="ADD TO QUEUE"}
//# sourceMappingURL=index.27700dd6.js.map
