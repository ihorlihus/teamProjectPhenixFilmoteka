const e=async()=>{try{return(await fetch("https://api.themoviedb.org/3/trending/movie/week?api_key=ff98b74c6ada2972698b8eff6707845a")).json()}catch(e){throw Error(response.statusText)}},t=async e=>{try{const t=await fetch(`\n        https://api.themoviedb.org/3/search/movie?api_key=ff98b74c6ada2972698b8eff6707845a&language=en-US&page=1&include_adult=false&query=${e}\n            `);return await t.json()}catch(e){throw Error(response.statusText)}};let n;(async()=>{try{const e=await fetch("\n            https://api.themoviedb.org/3/genre/movie/list?api_key=ff98b74c6ada2972698b8eff6707845a&language=en-US\n        ");return await e.json()}catch(e){throw Error(response.statusText)}})().then((e=>{localStorage.setItem("genres",JSON.stringify(e.genres));const t=localStorage.getItem("genres");n=JSON.parse(t)}));const o=e=>e.map((({poster_path:e,title:t,name:o,release_date:a,first_air_date:r,genre_ids:s,vote_average:i})=>{let d,c=n.filter((({id:e})=>s.includes(e))).map((({name:e})=>e));return d=c.length<=2?c.join(", "):c.slice(0,2).join(", ")+" Other",`\n                <li>\n                    <a>\n                        <img src='https://image.tmdb.org/t/p/w500${e}' alt='${t||o}' loading="lazy"/>\n                        <p>${t||o}</p>\n                        <div>\n                            <p>${d}</p>\n                            <p>${(a||r).slice(0,4)}</p>\n                            <span>${i}</span>\n                        </div>\n                    </a>\n                </li>\n            `})).join(""),a={gallery:document.querySelector(".gallery"),form:document.querySelector(".navigation__form")};e().then((e=>{a.gallery.innerHTML=o(e.results)}));const r=new class{getRefs(){const e={};return e.loader=document.querySelector(".loader"),e}show(){this.refs.loader.classList.remove("is-hidden")}hide(){this.refs.loader.classList.add("is-hidden")}constructor({hidden:e=!1}){this.refs=this.getRefs(),e&&this.hide()}}({loader:".loader",hidden:!0});a.form.addEventListener("submit",(e=>{e.preventDefault();const n=e.target.elements.navigation__input.value.trim();t(n).then((e=>{a.gallery.innerHTML=o(e.results),r.show()}))})),e().then((e=>{console.log(e.results),r.hide()}));const s=document.getElementById("modalTeam"),i=document.querySelector(".modal-team");s.addEventListener("click",(function(e){e.preventDefault(),i.classList.toggle("visually-hidden"),i.addEventListener("keydown")}));const d={openModalBtn:document.querySelector(".modal-open"),closeModalBtn:document.querySelector(".modal-close"),backdrop:document.querySelector(".js-backdrop")};function c(){window.removeEventListener("keydown",l),d.backdrop.classList.remove("show-modal")}function l(e){"Escape"===e.code&&c()}d.openModalBtn.addEventListener("click",(function(){window.addEventListener("keydown",l),d.backdrop.classList.add("show-modal")})),d.closeModalBtn.addEventListener("click",c),d.backdrop.addEventListener("click",(function(e){e.currentTarget===e.target&&c()})),window.onload=function(){document.body.classList.add("loaded_hiding"),window.setTimeout((function(){document.body.classList.add("loaded"),document.body.classList.remove("loaded_hiding")}),1e3)};const u={moviesPerPage:20,currentPage:1,searchMovie:""};new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(fetchTrendingMovies().then((e=>{try{u.currentPage+=1,refs.gallery.insertAdjacentHTML("beforeend",o(e.results))}catch(e){Notify.failure(e)}})),console.log("is intersecting"))}))}),{rootMargin:"200px",threshold:1});
//# sourceMappingURL=index-lib.9ff3da43.js.map
