{"mappings":"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","sources":["src/index.js","src/js/infinityScroll.js","src/js/spinner.js","src/js/fetchTrendingMovies.js","src/js/fetchQueryMovies.js","src/js/infinityScrollQuery.js","src/js/app.js","src/js/modalTeam.js"],"sourcesContent":["import './js/firebase';\nimport './js/fetchTrendingMovies';\nimport './js/app';\nimport './js/modalTeam';\nimport './js/fetchGenres';\nimport './js/preloader';\nimport './js/spinner';\nimport './js/infinityScroll';\nimport './js/localstorage';\nimport './js/renderOpenModal';\nimport './js/modalTeamVersion';\nimport './js/infinityScrollQuery';\n","import { createMovieCard } from './createMovieCard';\nimport { fetchTrendingMovies } from './fetchTrendingMovies';\nimport { refs } from './refs';\nimport Spinner from './spinner';\n\nexport let fetchOptions = {\n  currentPage: 1,\n  currentQueryPage: 1,\n};\n\nexport const resetPage = () => {\n  fetchOptions.currentPage = 1;\n};\n\nconst observerOptions = {\n  rootMargin: '0px',\n  threshold: 1.0,\n};\n\nconst observer = new IntersectionObserver(entries => {\n  entries.forEach(entry => {\n    if (entry.isIntersecting) {\n      onLoadMore();\n      console.log('is intersecting');\n    }\n  });\n}, observerOptions);\n\nsetObserverOn();\n\nexport function setObserverOn() {\n  observer.observe(document.querySelector('.scroll-check'));\n}\n\nexport function setObserverOff() {\n  observer.unobserve(document.querySelector('.scroll-check'));\n}\n\nconst spinner = new Spinner({\n  loader: '.loader',\n  hidden: true,\n});\n\nfunction onLoadMore() {\n  fetchTrendingMovies(spinner).then(movies => {\n    try {\n      if (fetchOptions.currentPage === movies.total_pages) {\n        refs.gallery.insertAdjacentHTML(\n          'beforeend',\n          createMovieCard(movies.results)\n        );\n        window.alert(\n          'Sorry this is the last page, we do not have any movies for you :('\n        );\n        setObserverOff();\n        return;\n      }\n      fetchOptions.currentPage += 1;\n      refs.gallery.insertAdjacentHTML(\n        'beforeend',\n        createMovieCard(movies.results)\n      );\n    } catch (error) {\n      console.log(error);\n    }\n  });\n}\n","export default class Spinner {\n    constructor({hidden = false}) {\n        this.refs = this.getRefs();\n        hidden && this.hide();\n    }\n\n    getRefs() {\n        const refs = {};\n        refs.loader = document.querySelector('.loader');\n        return refs;\n    }\n\n    show() {\n        this.refs.loader.classList.remove('is-hidden');\n    }\n\n    hide() {\n        this.refs.loader.classList.add('is-hidden')\n    }\n};\n","import { fetchOptions } from './infinityScroll';\n\nexport const fetchTrendingMovies = async spinner => {\n  try {\n    console.log(fetchOptions.currentPage);\n    spinner.show();\n    const response = await fetch(\n      `https://api.themoviedb.org/3/trending/movie/week?api_key=ff98b74c6ada2972698b8eff6707845a&page=${fetchOptions.currentPage}`\n    );\n    spinner.hide();\n    return response.json();\n  } catch (error) {\n    throw Error(response.statusText);\n  }\n};\n\n// fetchTrendingMovies().then(movies => {\n//   refs.gallery.innerHTML = createMovieCard(movies.results);\n// });\n// fetchTrendingMovies().then(data => console.log(data));\n// ${fetchOptions.currentPage}\n","// API Key: ff98b74c6ada2972698b8eff6707845a\n// Get trending\nimport { fetchOptions } from './infinityScroll';\nimport { setObserverOff } from './infinityScroll';\n\nexport const fetchQueryMovies = async name => {\n  try {\n    const response = await fetch(`\n        https://api.themoviedb.org/3/search/movie?api_key=ff98b74c6ada2972698b8eff6707845a&language=en-US&page=${fetchOptions.currentQueryPage}&include_adult=false&query=${name}`);\n    fetchOptions.currentQueryPage += 1;\n    setObserverOff();\n    return await response.json();\n  } catch (error) {\n    throw Error(response.statusText);\n  }\n};\n","import { createMovieCard } from './createMovieCard';\nimport { fetchQueryMovies } from './fetchQueryMovies';\nimport { refs } from './refs';\nimport Spinner from './spinner';\nimport { searchMovieTrim } from './app';\nimport { setObserverOff } from './infinityScroll';\n\nexport let fetchOptions = {\n  currentPage: 1,\n  currentQueryPage: 1,\n};\n\nexport const resetQueryPage = () => {\n  fetchOptions.currentQueryPage = 1;\n};\n\nconst spinner = new Spinner({\n  loader: '.loader',\n  hidden: true,\n});\n\nexport function onLoadMoreQuery() {\n  setObserverOff();\n  fetchQueryMovies(searchMovieTrim).then(movies => {\n    try {\n      refs.gallery.insertAdjacentHTML(\n        'beforeend',\n        createMovieCard(movies.results)\n      );\n    } catch (error) {\n      console.log(error);\n    }\n  });\n}\n","import { fetchQueryMovies } from './fetchQueryMovies';\nimport { createMovieCard } from './createMovieCard';\nimport { refs } from './refs';\nimport Spinner from './spinner';\nimport { resetPage } from './infinityScroll';\nimport { onLoadMoreQuery } from './infinityScrollQuery';\n\nconst spinner = new Spinner({\n  loader: '.loader',\n  hidden: true,\n});\nexport let searchMovieTrim = '';\n\nrefs.form.addEventListener('submit', event => {\n  event.preventDefault();\n\n  let searchMovie = event.target.elements.navigation__input.value;\n  searchMovieTrim = searchMovie.trim();\n\n  fetchQueryMovies(searchMovieTrim).then(movies => {\n    if (searchMovieTrim === '' || movies.results.length === 0) {\n      refs.notificate.classList.remove('navigation__notificate-hidden');\n      document.getElementById('myForm').reset();\n      setTimeout(() => {\n        refs.notificate.classList.add('navigation__notificate-hidden');\n      }, 5000);\n    } else {\n      refs.gallery.innerHTML = createMovieCard(movies.results);\n    }\n    spinner.show();\n  });\n\n  const observerOptions = {\n    rootMargin: '-100px',\n    threshold: 1.0,\n  };\n  const observerQuery = new IntersectionObserver(entries => {\n    entries.forEach(entry => {\n      if (entry.isIntersecting) {\n        onLoadMoreQuery();\n      }\n    });\n  }, observerOptions);\n\n  observerQuery.observe(document.querySelector('.scroll-check'));\n});\n","const modalLinkEl = document.getElementById('modalTeam');\nconst modalEl = document.querySelector('.modal-team');\nmodalLinkEl.addEventListener('click', modalOpen);\n\nfunction modalOpen(event) {\n  event.preventDefault();\n  modalEl.classList.toggle('visually-hidden');\n  modalEl.addEventListener('keydown');\n}\n\n// function modalClose() {\n//   if (modalEl.classList.contains('visually-hidden') === false) {\n//     console.log('modal');\n//   }\n//   console.log('modal is close');\n// }\n"],"names":["parcelRequire","$csVsy","$00cfbbdd8a53f936$export$2e2bcd8739ae039","getRefs","refs","loader","document","querySelector","show","this","classList","remove","hide","add","constructor","hidden","$2ce415f148c0c897$export$e12dbb0aa5635c44","currentPage","currentQueryPage","$2ce415f148c0c897$var$observer","IntersectionObserver","entries","forEach","entry","isIntersecting","$be3cba44527b5869$export$a2840eca364d9ff2","$2ce415f148c0c897$var$spinner","then","movies","total_pages","$krGWQ","gallery","insertAdjacentHTML","createMovieCard","results","window","alert","$2ce415f148c0c897$export$83528705734bea0e","error","console","log","rootMargin","threshold","unobserve","observe","async","spinner","response","fetch","json","Error","statusText","$eeb1a3c6a97310e8$export$908f733cb80721a6","name","$ce77af30fc9a6e63$var$spinner","$ce77af30fc9a6e63$export$b20e827591442787","form","addEventListener","event","preventDefault","searchMovie","target","elements","navigation__input","value","trim","length","notificate","getElementById","reset","setTimeout","innerHTML","$7ecca67214b608f8$var$modalLinkEl","$7ecca67214b608f8$var$modalEl","toggle"],"version":3,"file":"index.d0a434d1.js.map"}