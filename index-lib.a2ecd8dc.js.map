{"mappings":"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","sources":["src/js/refs.js","src/js/fetchGenres.js","src/js/renderOpenModal.js","src/js/buildModalMarcup.js","src/js/localstorage.js"],"sourcesContent":["export const refs = {\n  gallery: document.querySelector('.gallery'),\n  form: document.querySelector('.navigation__form'),\n  notificate: document.querySelector('.navigation__notificate'),\n  backdrop: document.querySelector('.js-backdrop'),\n  watchButton: document.querySelector('.button-watched__modal'),\n  queueButton: document.querySelector('.button-queue__modal'),\n  modal: document.querySelector('.modal__content'),\n  closeModalBtn: document.querySelector('.modal-close'),\n  buttonsContainer: document.querySelector('.buttons-modal'),\n  queueBtnLib: document.querySelector('.button-queue'),\n  watchedBtnLib: document.querySelector('.button-watched'),\n  galleryLib: document.querySelector('.gallery-lib'),\n};\n","export const fetchGenres = async () => {\n    try {\n        const response = await fetch(`\n            https://api.themoviedb.org/3/genre/movie/list?api_key=ff98b74c6ada2972698b8eff6707845a&language=en-US\n        `);\n        return await response.json();\n    } catch (error) {\n        throw Error(response.statusText);\n    }\n}\n\nexport let localGenres;\n\n\n\nfetchGenres().then(genres => {\n    localStorage.setItem(\"genres\", JSON.stringify(genres.genres));\n    const saveGenres = localStorage.getItem(\"genres\");\n    localGenres = JSON.parse(saveGenres);\n});\n\n// if (localStorage.getItem(\"genres\")) {\n//     return;\n// } else {\n//     fetchGenres().then(genres => {\n//         localStorage.setItem(\"genres\", JSON.stringify(genres.genres));\n//         const saveGenres = localStorage.getItem(\"genres\");\n//         localGenres = JSON.parse(saveGenres);\n//     });\n    \n// }","import { refs } from './refs';\nimport { openModalMovie } from './buildModalMarcup';\nimport { checkStorage, addToStorage, watchButtDisOrEn } from './localstorage';\n\nasync function request(id) {\n  try {\n    const response = await fetch(\n      `https://api.themoviedb.org/3/movie/${id}?api_key=deeaaa6f7bb1ec2c1571c017660b3676`\n    );\n    const film = response.json();\n    return film;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\nexport let cardObject;\nrefs.gallery.addEventListener('click', e => {\n  e.preventDefault();\n  request(e.target.dataset.id)\n    .then(data => {\n      cardObject = data;\n      refs.modal.innerHTML = '';\n      checkStorage();\n      watchButtDisOrEn();\n      onOpenModal();\n      refs.modal.insertAdjacentHTML('afterbegin', openModalMovie(data));\n      refs.backdrop.addEventListener('click', onBackdropClick);\n      refs.closeModalBtn.addEventListener('click', offCloseModal);\n      refs.buttonsContainer.addEventListener('click', addToStorage);\n    })\n    .catch(error => {\n      console.log(error);\n    });\n});\n\nfunction onOpenModal() {\n  window.addEventListener('keydown', onEscKeyPress);\n  refs.backdrop.classList.add('show-modal');\n}\n\nfunction offCloseModal() {\n  window.removeEventListener('keydown', onEscKeyPress);\n  refs.backdrop.classList.remove('show-modal');\n}\n\nfunction onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    offCloseModal();\n  }\n}\n\nfunction onEscKeyPress(e) {\n  const ESC_KEY_CODE = 'Escape';\n  if (e.code === ESC_KEY_CODE) {\n    offCloseModal();\n  }\n}\n","export function openModalMovie(data) {\n  const {\n    vote_average,\n    vote_count,\n    genres,\n    original_title,\n    title,\n    poster_path,\n    original_name,\n    popularity,\n    overview,\n    id,\n  } = data;\n\n  const popularityToString = popularity.toString();\n\n  return `<img class=\"img-modal\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"\" data-id=${id} />\n        <div class=\"container-modal\">\n          <h1 class=\"title-modal\">${title}</h1>\n          <table class=\"table\">\n            <tr class=\"table-separator\">\n              <th class=\"table__text\">Vote / Votes</th>\n              <th><span class=\"vote-average\">${vote_average}</span> / <span class=\"vote-count\">${vote_count}</span></th>\n            </tr>\n            <tr class=\"table-separator\">\n              <th class=\"table__text\">Popularity</th>\n              <th>${popularityToString.slice(0, 5)}</th>\n            </tr>\n            <tr class=\"table-separator\">\n              <th class=\"table__text\">Original Title</th>\n              <th>${original_title ? original_title : original_name}</th>\n            </tr>\n            <tr class=\"table-separator\">\n              <th class=\"table__text\">Genre</th>\n              <th>${\n                genres ? genres.map(genre => genre.name).slice(0, 2) : ' '\n              }</th>\n            </tr>\n          </table>\n          <h2 class=\"title-about__modal\">ABOUT</h2>\n          <p class=\"about-text__modal\">${overview}\n          </p>\n        </div>\n      </div>\n    </div>`;\n}\n","import { refs } from './refs';\nimport { cardObject } from './renderOpenModal';\n// export { checkStorage, addToStorage, watchButtDisOrEn, cardObject };\n// refs.gallery.addEventListener('click', e => {\n//   e.preventDefault();\n//   request(e.target.dataset.id)\n//     .then(data => {\n//       cardObject = data; //add const\n//       refs.modal.innerHTML = '';\n//       checkStorage(); //add func\n//       watchButtDisOrEn(); //add func\n//       onOpenModal();\n//       refs.modal.insertAdjacentHTML('afterbegin', createFilmCard(data));\n//       refs.backdrop.addEventListener('click', onBackdropClick);\n//       refs.buttonsContainer.addEventListener('click', addToStorage); // add this\n//     })\n//     .catch(error => {\n//       console.log(error);\n//     });\n// });\n\n//\n// export let cardObject = {};\n\nlet watchArr = [];\nlet queueArr = [];\nexport function checkStorage() {\n  if (localStorage.getItem('Watch')) {\n    watchArr = JSON.parse(localStorage.getItem('Watch'));\n  }\n  if (localStorage.getItem('Queue')) {\n    queueArr = JSON.parse(localStorage.getItem('Queue'));\n  }\n}\nexport function addToStorage(e) {\n  if (e.target.className === 'button-watched__modal') {\n    addToWatchStorage();\n    return;\n  }\n  if (e.target.className === 'button-queue__modal') {\n    addToQueueStorage();\n    return;\n  }\n}\nexport function watchButtDisOrEn() {\n  toAddWatchButt();\n  toAddQueueButt();\n  for (const storage of watchArr) {\n    if (storage.id === cardObject.id) {\n      toRemoveWatchButt();\n      break;\n    }\n  }\n  for (const storage of queueArr) {\n    if (storage.id === cardObject.id) {\n      toRemoveQueueButt();\n      break;\n    }\n  }\n}\n///watch-Fn\nfunction addToWatchStorage() {\n  console.log(cardObject);\n  if (refs.watchButton.textContent === 'ADD TO WATCHED') {\n    toRemoveWatchButt();\n    watchArr.push(cardObject);\n    localStorage.setItem('Watch', JSON.stringify(watchArr));\n    return;\n  }\n  if (refs.watchButton.textContent === 'REMOVE FROM WATCH') {\n    toAddWatchButt();\n    for (const storage of watchArr) {\n      if (storage.id === cardObject.id) {\n        const removeIndex = watchArr.indexOf(storage);\n        const removedWatchArr = watchArr.splice(removeIndex, 1);\n        localStorage.setItem('Watch', JSON.stringify(watchArr));\n      }\n    }\n  }\n}\n\nfunction toRemoveWatchButt() {\n  refs.watchButton.style.backgroundColor = 'red';\n  refs.watchButton.textContent = 'REMOVE FROM WATCH';\n}\n\nfunction toAddWatchButt() {\n  refs.watchButton.style.backgroundColor = '#FF6B01';\n  refs.watchButton.textContent = 'ADD TO WATCHED';\n}\n////Queue-Fn\nfunction addToQueueStorage() {\n  if (refs.queueButton.textContent === 'ADD TO QUEUE') {\n    toRemoveQueueButt();\n    queueArr.push(cardObject);\n    localStorage.setItem('Queue', JSON.stringify(queueArr));\n    return;\n  }\n  if (refs.queueButton.textContent === 'REMOVE FROM QUEUE') {\n    toAddQueueButt();\n    for (const storage of queueArr) {\n      if (storage.id === cardObject.id) {\n        const removeIndex = queueArr.indexOf(storage);\n        const removedWatchArr = queueArr.splice(removeIndex, 1);\n        localStorage.setItem('Queue', JSON.stringify(queueArr));\n      }\n    }\n  }\n}\n\nfunction toRemoveQueueButt() {\n  refs.queueButton.style.backgroundColor = 'pink';\n  refs.queueButton.textContent = 'REMOVE FROM QUEUE';\n}\n\nfunction toAddQueueButt() {\n  refs.queueButton.style.backgroundColor = 'white';\n  refs.queueButton.textContent = 'ADD TO QUEUE';\n}\n"],"names":["$ee27a4d7c64fc8c4$export$21666b427502ea6d","gallery","document","querySelector","form","notificate","backdrop","watchButton","queueButton","modal","closeModalBtn","buttonsContainer","queueBtnLib","watchedBtnLib","galleryLib","$5844b68ee09a1fe1$export$51d062533fa741c4","async","response","fetch","json","error","Error","statusText","$5844b68ee09a1fe1$export$e95d448b93b2cdb","then","genres","localStorage","setItem","JSON","stringify","saveGenres","getItem","parse","$krGWQ","parcelRequire","$0a74a33e2a19043d$export$5e885b3c72a6c9f7","$0a74a33e2a19043d$var$offCloseModal","window","removeEventListener","$0a74a33e2a19043d$var$onEscKeyPress","refs","classList","remove","$0a74a33e2a19043d$var$onBackdropClick","e","currentTarget","target","code","addEventListener","preventDefault","id","console","log","message","$0a74a33e2a19043d$var$request","dataset","data","innerHTML","$bOFJ0","checkStorage","watchButtDisOrEn","add","insertAdjacentHTML","$ZdK2o","openModalMovie","addToStorage","catch","$0b805b67754fd9d5$export$3c9e96c8bb4f4ee4","vote_average","vote_count","original_title","title","poster_path","original_name","popularity","overview","toString","slice","map","genre","name","$89a4baeedb6cdec9$var$watchArr","$89a4baeedb6cdec9$var$queueArr","$89a4baeedb6cdec9$export$cead25c4f636f79","$89a4baeedb6cdec9$export$aaedbcfc86e6cb5e","className","textContent","$89a4baeedb6cdec9$var$toRemoveQueueButt","push","$TEBOm","cardObject","$89a4baeedb6cdec9$var$toAddQueueButt","storage","removeIndex","indexOf","splice","$89a4baeedb6cdec9$var$addToQueueStorage","$89a4baeedb6cdec9$var$toRemoveWatchButt","$89a4baeedb6cdec9$var$toAddWatchButt","$89a4baeedb6cdec9$var$addToWatchStorage","$89a4baeedb6cdec9$export$4e97e39014f13610","storage1","style","backgroundColor"],"version":3,"file":"index-lib.a2ecd8dc.js.map"}