var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},t={},n=e.parcelRequired7c6;null==n&&((n=function(e){if(e in r)return r[e].exports;if(e in t){var n=t[e];delete t[e];var o={id:e,exports:{}};return r[e]=o,n.call(o.exports,o,o.exports),o.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,r){t[e]=r},e.parcelRequired7c6=n);var o=n("csVsy");var s=n("krGWQ");class a{getRefs(){const e={};return e.loader=document.querySelector(".loader"),e}show(){this.refs.loader.classList.remove("is-hidden")}hide(){this.refs.loader.classList.add("is-hidden")}constructor({hidden:e=!1}){this.refs=this.getRefs(),e&&this.hide()}}let i={currentPage:1,currentQueryPage:1};const c=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&((async e=>{try{console.log(i.currentPage),e.show();const r=await fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=ff98b74c6ada2972698b8eff6707845a&page=${i.currentPage}`);return e.hide(),r.json()}catch(e){throw Error(response.statusText)}})(l).then((e=>{try{if(i.currentPage===e.total_pages)return s.refs.gallery.insertAdjacentHTML("beforeend",(0,o.createMovieCard)(e.results)),window.alert("Sorry this is the last page, we do not have any movies for you :("),void d();i.currentPage+=1,s.refs.gallery.insertAdjacentHTML("beforeend",(0,o.createMovieCard)(e.results))}catch(e){console.log(e)}})),console.log("is intersecting"))}))}),{rootMargin:"0px",threshold:1});function d(){c.unobserve(document.querySelector(".scroll-check"))}c.observe(document.querySelector(".scroll-check"));const l=new a({loader:".loader",hidden:!0});const u=async e=>{try{const r=await fetch(`\n        https://api.themoviedb.org/3/search/movie?api_key=ff98b74c6ada2972698b8eff6707845a&language=en-US&page=${i.currentQueryPage}&include_adult=false&query=${e}`);return i.currentQueryPage+=1,d(),await r.json()}catch(e){throw Error(response.statusText)}};o=n("csVsy"),s=n("krGWQ"),o=n("csVsy"),s=n("krGWQ");new a({loader:".loader",hidden:!0});const f=new a({loader:".loader",hidden:!0});let h="";s.refs.form.addEventListener("submit",(e=>{e.preventDefault();let r=e.target.elements.navigation__input.value;h=r.trim(),u(h).then((e=>{""===h||0===e.results.length?(s.refs.notificate.classList.remove("navigation__notificate-hidden"),document.getElementById("myForm").reset(),setTimeout((()=>{s.refs.notificate.classList.add("navigation__notificate-hidden")}),5e3)):s.refs.gallery.innerHTML=(0,o.createMovieCard)(e.results),f.show()}));new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(d(),u(h).then((e=>{try{s.refs.gallery.insertAdjacentHTML("beforeend",(0,o.createMovieCard)(e.results))}catch(e){console.log(e)}})))}))}),{rootMargin:"-100px",threshold:1}).observe(document.querySelector(".scroll-check"))})),n("7zQK0"),n("ioBS9"),n("bOFJ0"),n("TEBOm"),n("6dDzJ");
//# sourceMappingURL=index.6b7acdaa.js.map
