{"mappings":"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","sources":["src/js/fetchGenres.js","src/js/createMovieCard.js","src/js/fetchQueryMovies.js","src/js/refs.js","src/js/spinner.js","src/js/infinityScroll.js","src/js/fetchTrendingMovies.js","src/js/app.js","src/js/modalTeam.js","src/js/buildModalMarcup.js","src/js/renderOpenModal.js","src/js/preloader.js"],"sourcesContent":["export const fetchGenres = async () => {\n    try {\n        const response = await fetch(`\n            https://api.themoviedb.org/3/genre/movie/list?api_key=ff98b74c6ada2972698b8eff6707845a&language=en-US\n        `);\n        return await response.json();\n    } catch (error) {\n        throw Error(response.statusText);\n    }\n}\n\nexport let localGenres;\n\nfetchGenres().then(genres => {\n    localStorage.setItem(\"genres\", JSON.stringify(genres.genres));\n    const saveGenres = localStorage.getItem(\"genres\");\n    localGenres = JSON.parse(saveGenres);\n});\n","import {  localGenres } from \"./fetchGenres\";\n\nexport const createMovieCard = (movies) => {\n    return movies.map( \n        ({\n            poster_path,\n            title,\n            name,\n            release_date,\n            first_air_date,\n            genre_ids,\n            id,\n            vote_average,\n            \n        }) => {\n            let moviesGenres;\n\n            let moviesGenresFindName = localGenres\n                .filter(({ id }) => genre_ids.includes(id))\n                .map(({ name }) => name)\n\n            if (moviesGenresFindName.length <= 2) {\n                moviesGenres = moviesGenresFindName.join(', ')\n            } else {\n                moviesGenres = moviesGenresFindName.slice(0, 2).join(', ') + ', Other';\n            }\n\n            return `\n                <li data-id=\"${id}\">\n                    <a class=\"card__link\" data-id=\"${id}\">\n                        <img class=\"card__img\" data-id=\"${id}\" src='https://image.tmdb.org/t/p/w500${poster_path}' alt='${title || name}' loading=\"lazy\"/>\n                        <p class=\"card__title\" data-id=\"${id}\">${title || name}</p>\n                        <div class=\"card__inform\" data-id=\"${id}\">\n                            <p class=\"card__genres\">${moviesGenres}</p>\n                            <p class=\"card__date\">${(release_date || first_air_date).slice(0, 4)}</p>\n                            <span class=\"card__vote is-hidden\">${vote_average}</span>\n                        </div>\n                    </a>\n                </li>\n            `\n            }).join('');\n}\n\n","// API Key: ff98b74c6ada2972698b8eff6707845a\n// Get trending\n\nexport const fetchQueryMovies = async (name) => {\n    try {\n        const response = await fetch(`\n        https://api.themoviedb.org/3/search/movie?api_key=ff98b74c6ada2972698b8eff6707845a&language=en-US&page=1&include_adult=false&query=${name}\n            `);\n        return await response.json();  \n    } catch (error) {\n        throw Error(response.statusText);\n    }\n}\n","export const refs = {\n  gallery: document.querySelector('.gallery'),\n  form: document.querySelector('.navigation__form'),\n  backdrop: document.querySelector('.js-backdrop'),\n  watchButton: document.querySelector('.button-watched__modal'),\n  queueButton: document.querySelector('.button-queue__modal'),\n  modal: document.querySelector('.modal__content'),\n  closeModalBtn: document.querySelector('.modal-close'),\n};\n","export default class Spinner {\n    constructor({hidden = false}) {\n        this.refs = this.getRefs();\n        hidden && this.hide();\n    }\n\n    getRefs() {\n        const refs = {};\n        refs.loader = document.querySelector('.loader');\n        return refs;\n    }\n\n    show() {\n        this.refs.loader.classList.remove('is-hidden');\n    }\n\n    hide() {\n        this.refs.loader.classList.add('is-hidden')\n    }\n};\n","import {createMovieCard} from './createMovieCard';\nimport { fetchQueryMovies } from './fetchQueryMovies';\nimport { fetchTrendingMovies } from './fetchTrendingMovies';\nimport {refs} from './refs';\nimport Spinner from './spinner';\n\nlet fetchOptions = {\n    currentPage: 1,\n};\n\nconst observerOptions = {\n    rootMargin: '0px',\n    threshold: 1.0\n};\n    \nconst observer = new IntersectionObserver(entries => {\n    entries.forEach(entry => {\n        if (entry.isIntersecting) {\n            onLoadMore();\n        };\n    });\n}, observerOptions);\n\nsetObserverOn();\n\nfunction setObserverOn() {\n    observer.observe(document.querySelector('.scroll-check'));\n};\n    \nfunction setObserverOff() {\n    observer.unobserve(document.querySelector('.scroll-check'));\n};\n\nconst spinner = new Spinner({\n    loader: '.loader',\n    hidden: true,\n})\n\nfunction onLoadMore() {\n    \n    fetchTrendingMovies().then(movies => {\n        try {\n            fetchOptions.currentPage += 1;\n            refs.gallery.insertAdjacentHTML('beforeend', createMovieCard(movies.results));\n            spinner.hide();\n        } catch (error) {\n            console.log(error);\n        }\n    });\n\n    fetchQueryMovies().then(movies => {\n        try {\n            fetchOptions.currentPage += 1;\n            refs.gallery.insertAdjacentHTML('beforeend', createMovieCard(movies.results));\n            spinner.hide();     \n        } catch (error) {\n            console.log(error);\n        }\n    });\n}\n    \n    \n// function drawMovies(data) {\n//     const movies = data.hits;\n//     totalMovies = data.totalHits;\n    \n//     if (!totalMovies) {\n//         Notify.failure('Sorry, there are NO MOVIES matching your search query. Please try again.');\n            \n//         refs.form.reset();\n//         return;\n//     };\n    \n//     if (fetchOptions.currentPage === 1) {\n//         Notify.success(`Wow! We found for you${totalMovies} movies.`);\n//     };\n    \n//     createMovieCard(movies.results);\n    \n//     setObserverOn();\n// };","import { fetchOptions } from './infinityScroll'\n\nexport const fetchTrendingMovies = async () => {\n  try {\n    const response = await fetch(\n      `https://api.themoviedb.org/3/trending/movie/week?api_key=ff98b74c6ada2972698b8eff6707845a`\n      // `https://api.themoviedb.org/3/trending/movie/week?api_key=ff98b74c6ada2972698b8eff6707845a&page=${fetchOptions.currentPage}`\n    );\n    return response.json();\n  } catch (error) {\n    throw Error(response.statusText);\n  }\n};\n\n\n// fetchTrendingMovies().then(movies => console.log(movies.results));\n","\nimport {fetchTrendingMovies} from './fetchTrendingMovies';\nimport {fetchQueryMovies} from './fetchQueryMovies';\nimport {createMovieCard} from './createMovieCard';\nimport {refs} from './refs';\nimport Spinner from './spinner';\n\nconst spinner = new Spinner({\n    loader: '.loader',\n    hidden: true,\n})\n\nrefs.form.addEventListener('submit', (event) => {\n    event.preventDefault();\n\n    const searchMovie = event.target.elements.navigation__input.value;\n    const searchMovieTrim = searchMovie.trim();\n\n    fetchQueryMovies(searchMovieTrim)\n        .then(movies => {\n            if (searchMovieTrim === '' || movies.results.length === 0) {\n                window.alert('Please write correct name! ');\n                return;\n            } else {\n                refs.gallery.innerHTML = createMovieCard(movies.results);\n            }\n                spinner.show();\n            }\n        )    \n})\n\n\n\n","const modalLinkEl = document.getElementById('modalTeam');\nconst modalEl = document.querySelector('.modal-team');\nmodalLinkEl.addEventListener('click', modalOpen);\n\nfunction modalOpen(event) {\n  event.preventDefault();\n  modalEl.classList.toggle('visually-hidden');\n  modalEl.addEventListener('keydown');\n}\n\n// function modalClose() {\n//   if (modalEl.classList.contains('visually-hidden') === false) {\n//     console.log('modal');\n//   }\n//   console.log('modal is close');\n// }\n","export function openModalMovie(data) {\n  const {\n    vote_average,\n    vote_count,\n    genres,\n    original_title,\n    title,\n    poster_path,\n    original_name,\n    popularity,\n    overview,\n    id,\n  } = data;\n\n  return `\n        <img class=\"img-modal\" src=\"https://image.tmdb.org/t/p/w500${poster_path}\" alt=\"\" data-id=${id} />\n        <div class=\"container-modal\">\n          <h1 class=\"title-modal\">${title}</h1>\n          <table class=\"table\">\n            <tr>\n              <th class=\"table__text\">Vote / Votes</th>\n              <th><span class=\"vote-average\">${vote_average}</span> / <span class=\"vote-count\">${vote_count}</span></th>\n            </tr>\n            <tr>\n              <th class=\"table__text\">Popularity</th>\n              <th>${popularity}</th>\n            </tr>\n            <tr>\n              <th class=\"table__text\">Original Title</th>\n              <th>${original_title ? original_title : original_name}</th>\n            </tr>\n            <tr>\n              <th class=\"table__text\">Genre</th>\n              <th>${genres ? genres.map(genre => genre.name) : ' '}</th>\n            </tr>\n          </table>\n          <h2 class=\"title-about__modal\">ABOUT</h2>\n          <p class=\"about-text__modal\">${overview}\n          </p>\n        </div>\n      </div>\n    </div>`;\n}\n","import { refs } from './refs';\nimport { openModalMovie } from './buildModalMarcup';\n\nasync function request(id) {\n  try {\n    const response = await fetch(\n      `https://api.themoviedb.org/3/movie/${id}?api_key=deeaaa6f7bb1ec2c1571c017660b3676`\n    );\n    const film = response.json();\n    return film;\n  } catch (error) {\n    console.log(error.message);\n  }\n}\n\nrefs.gallery.addEventListener('click', e => {\n  e.preventDefault();\n\n  request(e.target.dataset.id)\n    .then(data => {\n      onOpenModal();\n\n      refs.modal.innerHTML = '';\n      refs.modal.insertAdjacentHTML('afterbegin', openModalMovie(data));\n      refs.backdrop.addEventListener('click', onBackdropClick);\n      refs.closeModalBtn.addEventListener('click', offCloseModal);\n    })\n    .catch(error => {\n      console.log(error);\n    });\n});\n\nfunction onOpenModal() {\n  window.addEventListener('keydown', onEscKeyPress);\n  refs.backdrop.classList.add('show-modal');\n}\n\nfunction offCloseModal() {\n  window.removeEventListener('keydown', onEscKeyPress);\n  refs.backdrop.classList.remove('show-modal');\n}\n\nfunction onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    offCloseModal();\n  }\n}\n\nfunction onEscKeyPress(e) {\n  const ESC_KEY_CODE = 'Escape';\n  if (e.code === ESC_KEY_CODE) {\n    offCloseModal();\n  }\n}\n","window.onload = function () {\n    document.body.classList.add('loaded_hiding');\n    window.setTimeout(function () {\n      document.body.classList.add('loaded');\n      document.body.classList.remove('loaded_hiding');\n    }, 1000);\n  }"],"names":["$5844b68ee09a1fe1$export$51d062533fa741c4","async","response","fetch","json","error","Error","statusText","$5844b68ee09a1fe1$export$e95d448b93b2cdb","then","genres","localStorage","setItem","JSON","stringify","saveGenres","getItem","parse","$9134abd8877f9bb7$export$9d27b867a89df126","movies","map","poster_path","title","name","name1","release_date","first_air_date","genre_ids","id","id1","vote_average","moviesGenres","moviesGenresFindName","filter","includes","length","join","slice","$eeb1a3c6a97310e8$export$908f733cb80721a6","$ee27a4d7c64fc8c4$export$21666b427502ea6d","gallery","document","querySelector","form","backdrop","watchButton","queueButton","modal","closeModalBtn","$00cfbbdd8a53f936$export$2e2bcd8739ae039","getRefs","refs","loader","show","this","classList","remove","hide","add","constructor","hidden","$2ce415f148c0c897$var$fetchOptions","currentPage","$2ce415f148c0c897$var$observer","IntersectionObserver","entries","forEach","entry","isIntersecting","$be3cba44527b5869$export$a2840eca364d9ff2","insertAdjacentHTML","results","$2ce415f148c0c897$var$spinner","console","log","rootMargin","threshold","observe","$ce77af30fc9a6e63$var$spinner","addEventListener","event","preventDefault","searchMovieTrim","target","elements","navigation__input","value","trim","innerHTML","window","alert","$7ecca67214b608f8$var$modalLinkEl","getElementById","$7ecca67214b608f8$var$modalEl","$0b805b67754fd9d5$export$3c9e96c8bb4f4ee4","data","vote_count","original_title","original_name","popularity","overview","genre","$0a74a33e2a19043d$var$offCloseModal","removeEventListener","$0a74a33e2a19043d$var$onEscKeyPress","$0a74a33e2a19043d$var$onBackdropClick","e","currentTarget","code","toggle","onload","body","setTimeout","message","$0a74a33e2a19043d$var$request","dataset","catch"],"version":3,"file":"index-lib.5840d3b2.js.map"}