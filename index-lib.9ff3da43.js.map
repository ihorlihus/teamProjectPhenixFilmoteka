{"mappings":"AAAO,MAAMA,EAAsBC,UACjC,IAIE,aAHuBC,MACrB,8FAEcC,OAChB,MAAOC,GACP,MAAMC,MAAMC,SAASC,cCJZC,EAAmBP,MAAOQ,IACnC,IACI,MAAMH,QAAiBJ,MAAM,gJACwGO,mBAErI,aAAaH,EAASH,OACxB,MAAOC,GACL,MAAMC,MAAMC,SAASC,cCCtB,IAAIG,EAXgBT,WACvB,IACI,MAAMK,QAAiBJ,MAAM,iIAG7B,aAAaI,EAASH,OACxB,MAAOC,GACL,MAAMC,MAAMC,SAASC,cAM7BI,GAAcC,MAAKC,IACfC,aAAaC,QAAQ,SAAUC,KAAKC,UAAUJ,EAAOA,SACrD,MAAMK,EAAaJ,aAAaK,QAAQ,UACxCT,EAAcM,KAAKI,MAAMF,MCdtB,MAAMG,EAAmBC,GACrBA,EAAOC,KACV,EAACC,YACGA,EAAWC,MACXA,EACAhB,KAAAiB,EAAIC,aACJA,EAAYC,eACZA,EAAcC,UACdA,EAASC,aAETA,MAGA,IAAIC,EAEAC,EAAuBtB,EACtBuB,QAAO,EAACC,GAAEA,KAASL,EAAUM,SAASD,KACtCX,KAAI,EAACd,KAAEA,KAAWA,IAQvB,OALIsB,EADAC,EAAqBI,QAAU,EAChBJ,EAAqBK,KAAK,MAE1BL,EAAqBM,MAAM,EAAG,GAAGD,KAAK,MAAQ,SAG1D,qHAGgDb,WAAqBC,GAASC,mDACpED,GAASC,wEAELK,0CACCJ,GAAgBC,GAAgBU,MAAM,EAAG,6CACvCR,6GAKrBO,KAAK,ICxCPE,EAAO,CAChBC,QAASC,SAASC,cAAc,YAChCC,KAAMF,SAASC,cAAc,sBCKjC1C,IAAsBY,MAAKU,IACvBiB,EAAKC,QAAQI,UAAYvB,EAAgBC,EAAOuB,YAGpD,MAAMC,EAAU,ICXD,MAMXC,UACI,MAAMC,EAAO,GAEb,OADAA,EAAKC,OAASR,SAASC,cAAc,WAC9BM,EAGXE,OACIC,KAAKH,KAAKC,OAAOG,UAAUC,OAAO,aAGtCC,OACIH,KAAKH,KAAKC,OAAOG,UAAUG,IAAI,aAhBnCC,aAAYC,OAACA,GAAS,IAClBN,KAAKH,KAAOG,KAAKJ,UACjBU,GAAUN,KAAKG,SDQK,CACxBL,OAAQ,UACRQ,QAAQ,IAGZlB,EAAKI,KAAKe,iBAAiB,UAAWC,IAClCA,EAAMC,iBAEN,MACMC,EADcF,EAAMG,OAAOC,SAASC,kBAAkBC,MACxBC,OAEpC1D,EAAiBqD,GACZjD,MAAKU,IACFiB,EAAKC,QAAQI,UAAYvB,EAAgBC,EAAOuB,SAChDC,EAAQI,aAIpBlD,IAAsBY,MAAKU,IACvB6C,QAAQC,IAAI9C,EAAOuB,SACnBC,EAAQQ,UE/BZ,MAAMe,EAAc5B,SAAS6B,eAAe,aACtCC,EAAU9B,SAASC,cAAc,eACvC2B,EAAYX,iBAAiB,SAE7B,SAAmBC,GACjBA,EAAMC,iBACNW,EAAQnB,UAAUoB,OAAO,mBACzBD,EAAQb,iBAAiB,cCP3B,MAAMe,EAAO,CACXC,aAAcjC,SAASC,cAAc,eACrCiC,cAAelC,SAASC,cAAc,gBACtCkC,SAAUnC,SAASC,cAAc,iBAYnC,SAASmC,IACPC,OAAOC,oBAAoB,UAAWC,GACtCP,EAAKG,SAASxB,UAAUC,OAAO,cASjC,SAAS2B,EAAcC,GACA,WACjBA,EAAEC,MACJL,IAvBJJ,EAAKC,aAAahB,iBAAiB,SAInC,WACEoB,OAAOpB,iBAAiB,UAAWsB,GACnCP,EAAKG,SAASxB,UAAUG,IAAI,iBAL9BkB,EAAKE,cAAcjB,iBAAiB,QAASmB,GAC7CJ,EAAKG,SAASlB,iBAAiB,SAY/B,SAAyBuB,GACnBA,EAAEE,gBAAkBF,EAAEnB,QACxBe,OCtBJC,OAAOM,OAAS,WACZ3C,SAAS4C,KAAKjC,UAAUG,IAAI,iBAC5BuB,OAAOQ,YAAW,WAChB7C,SAAS4C,KAAKjC,UAAUG,IAAI,UAC5Bd,SAAS4C,KAAKjC,UAAUC,OAAO,mBAC9B,MCHP,MAAMkC,EAAe,CACjBC,cAAe,GACfC,YAAa,EACbC,YAAa,IAQA,IAAIC,sBAAqBC,IACtCA,EAAQC,SAAQC,IACRA,EAAMC,iBAoBdC,sBAAsBpF,MAAKU,IACvB,IACIiE,EAAaE,aAAe,EAC5BzC,KAAKR,QAAQyD,mBAAmB,YAAa5E,EAAgBC,EAAOuB,UACtE,MAAOzC,GACL8F,OAAOC,QAAQ/F,OAvBf+D,QAAQC,IAAI,yBATA,CACpBgC,WAAY,QACZC,UAAW","sources":["src/js/fetchTrendingMovies.js","src/js/fetchQueryMovies.js","src/js/fetchGenres.js","src/js/createMovieCard.js","src/js/refs.js","src/js/app.js","src/js/spinner.js","src/js/modalTeam.js","src/js/modal.js","src/js/preloader.js","src/js/infinityScroll.js"],"sourcesContent":["export const fetchTrendingMovies = async () => {\n  try {\n    const response = await fetch(\n      'https://api.themoviedb.org/3/trending/movie/week?api_key=ff98b74c6ada2972698b8eff6707845a'\n    );\n    return response.json();\n  } catch (error) {\n    throw Error(response.statusText);\n  }\n};\n\n// fetchTrendingMovies().then(movies => console.log(movies.results));\n","// API Key: ff98b74c6ada2972698b8eff6707845a\n// Get trending\n\nexport const fetchQueryMovies = async (name) => {\n    try {\n        const response = await fetch(`\n        https://api.themoviedb.org/3/search/movie?api_key=ff98b74c6ada2972698b8eff6707845a&language=en-US&page=1&include_adult=false&query=${name}\n            `);\n        return await response.json();\n    } catch (error) {\n        throw Error(response.statusText);\n    }\n}\n","export const fetchGenres = async () => {\n    try {\n        const response = await fetch(`\n            https://api.themoviedb.org/3/genre/movie/list?api_key=ff98b74c6ada2972698b8eff6707845a&language=en-US\n        `);\n        return await response.json();\n    } catch (error) {\n        throw Error(response.statusText);\n    }\n}\n\nexport let localGenres;\n\nfetchGenres().then(genres => {\n    localStorage.setItem(\"genres\", JSON.stringify(genres.genres));\n    const saveGenres = localStorage.getItem(\"genres\");\n    localGenres = JSON.parse(saveGenres);\n});\n","import {  localGenres } from \"./fetchGenres\";\n\nexport const createMovieCard = (movies) => {\n    return movies.map( \n        ({\n            poster_path,\n            title,\n            name,\n            release_date,\n            first_air_date,\n            genre_ids,\n            // genres,\n            vote_average,\n            \n        }) => {\n            let moviesGenres;\n\n            let moviesGenresFindName = localGenres\n                .filter(({ id }) => genre_ids.includes(id))\n                .map(({ name }) => name)\n\n            if (moviesGenresFindName.length <= 2) {\n                moviesGenres = moviesGenresFindName.join(', ')\n            } else {\n                moviesGenres = moviesGenresFindName.slice(0, 2).join(', ') + ' Other';\n            }\n\n            return `\n                <li>\n                    <a>\n                        <img src='https://image.tmdb.org/t/p/w500${poster_path}' alt='${title || name}' loading=\"lazy\"/>\n                        <p>${title || name}</p>\n                        <div>\n                            <p>${moviesGenres}</p>\n                            <p>${(release_date || first_air_date).slice(0, 4)}</p>\n                            <span>${vote_average}</span>\n                        </div>\n                    </a>\n                </li>\n            `\n            }).join('');\n}\n\n","export const refs = {\n    gallery: document.querySelector('.gallery'),\n    form: document.querySelector('.navigation__form'),\n}","\nimport {fetchTrendingMovies} from './fetchTrendingMovies';\nimport {fetchQueryMovies} from './fetchQueryMovies';\nimport {createMovieCard} from './createMovieCard';\nimport {refs} from './refs';\nimport Spinner from './spinner';\n\nfetchTrendingMovies().then(movies => {\n    refs.gallery.innerHTML = createMovieCard(movies.results);\n});\n\nconst spinner = new Spinner({\n    loader: '.loader',\n    hidden: true,\n})\n\nrefs.form.addEventListener('submit', (event) => {\n    event.preventDefault();\n\n    const searchMovie = event.target.elements.navigation__input.value;\n    const searchMovieTrim = searchMovie.trim();\n\n    fetchQueryMovies(searchMovieTrim)\n        .then(movies => {\n            refs.gallery.innerHTML = createMovieCard(movies.results);\n            spinner.show();\n        })\n})\n\nfetchTrendingMovies().then(movies => {\n    console.log(movies.results);\n    spinner.hide();\n});\n\n\n\n","export default class Spinner {\n    constructor({hidden = false}) {\n        this.refs = this.getRefs();\n        hidden && this.hide();\n    }\n\n    getRefs() {\n        const refs = {};\n        refs.loader = document.querySelector('.loader');\n        return refs;\n    }\n\n    show() {\n        this.refs.loader.classList.remove('is-hidden');\n    }\n\n    hide() {\n        this.refs.loader.classList.add('is-hidden')\n    }\n};\n","const modalLinkEl = document.getElementById('modalTeam');\nconst modalEl = document.querySelector('.modal-team');\nmodalLinkEl.addEventListener('click', modalOpen);\n\nfunction modalOpen(event) {\n  event.preventDefault();\n  modalEl.classList.toggle('visually-hidden');\n  modalEl.addEventListener('keydown');\n}\n\n// function modalClose() {\n//   if (modalEl.classList.contains('visually-hidden') === false) {\n//     console.log('modal');\n//   }\n//   console.log('modal is close');\n// }\n","const refs = {\n  openModalBtn: document.querySelector('.modal-open'),\n  closeModalBtn: document.querySelector('.modal-close'),\n  backdrop: document.querySelector('.js-backdrop'),\n};\n\nrefs.openModalBtn.addEventListener('click', onOpenModal);\nrefs.closeModalBtn.addEventListener('click', offCloseModal);\nrefs.backdrop.addEventListener('click', onBackdropClick);\n\nfunction onOpenModal() {\n  window.addEventListener('keydown', onEscKeyPress);\n  refs.backdrop.classList.add('show-modal');\n}\n\nfunction offCloseModal() {\n  window.removeEventListener('keydown', onEscKeyPress);\n  refs.backdrop.classList.remove('show-modal');\n}\n\nfunction onBackdropClick(e) {\n  if (e.currentTarget === e.target) {\n    offCloseModal();\n  }\n}\n\nfunction onEscKeyPress(e) {\n  const ESC_KEY_CODE = 'Escape';\n  if (e.code === ESC_KEY_CODE) {\n    offCloseModal();\n  }\n}\n","window.onload = function () {\n    document.body.classList.add('loaded_hiding');\n    window.setTimeout(function () {\n      document.body.classList.add('loaded');\n      document.body.classList.remove('loaded_hiding');\n    }, 1000);\n  }","import {createMovieCard} from './createMovieCard';\n\nconst fetchOptions = {\n    moviesPerPage: 20,\n    currentPage: 1,\n    searchMovie: \"\",\n};\n\nconst observerOptions = {\n    rootMargin: '200px',\n    threshold: 1.0\n};\n    \nconst observer = new IntersectionObserver(entries => {\n    entries.forEach(entry => {\n        if (entry.isIntersecting) {\n            onLoadMore();\n            console.log('is intersecting');\n        };\n    });\n}, observerOptions);\n\nfunction resetValues() {\n    fetchOptions.currentPage = 1;\n    setObserverOff();\n}\n\nfunction onLoadMore() {\n    // try {\n    //     fetchOptions.currentPage += 1;\n    //     const fetchData = await fetchTrendingMovies(fetchOptions);\n    //     await drawMovies(fetchData);\n    // } catch (error) {\n    //     Notify.failure(error);\n    // };\n    fetchTrendingMovies().then(movies => {\n        try {\n            fetchOptions.currentPage += 1;\n            refs.gallery.insertAdjacentHTML('beforeend', createMovieCard(movies.results));\n        } catch (error) {\n            Notify.failure(error);\n        }\n    });\n}\n    \nfunction setObserverOn() {\n    observer.observe(document.querySelector('.scroll-check'));\n};\n    \nfunction setObserverOff() {\n    observer.unobserve(document.querySelector('.scroll-check'));\n};\n    \n// function drawMovies(data) {\n//     const movies = data.hits;\n//     totalMovies = data.totalHits;\n    \n//     if (!totalMovies) {\n//         Notify.failure('Sorry, there are NO MOVIES matching your search query. Please try again.');\n            \n//         refs.form.reset();\n//         return;\n//     };\n    \n//     if (fetchOptions.currentPage === 1) {\n//         Notify.success(`Wow! We found for you${totalMovies} movies.`);\n//     };\n    \n//     createMovieCard(movies.results);\n    \n//     setObserverOn();\n// };"],"names":["$be3cba44527b5869$export$a2840eca364d9ff2","async","fetch","json","error","Error","response","statusText","$eeb1a3c6a97310e8$export$908f733cb80721a6","name","$5844b68ee09a1fe1$export$51d062533fa741c4","$5844b68ee09a1fe1$export$e95d448b93b2cdb","then","genres","localStorage","setItem","JSON","stringify","saveGenres","getItem","parse","$9134abd8877f9bb7$export$9d27b867a89df126","movies","map","poster_path","title","name1","release_date","first_air_date","genre_ids","vote_average","moviesGenres","moviesGenresFindName","filter","id","includes","length","join","slice","$ee27a4d7c64fc8c4$export$21666b427502ea6d","gallery","document","querySelector","form","innerHTML","results","$ce77af30fc9a6e63$var$spinner","getRefs","refs","loader","show","this","classList","remove","hide","add","constructor","hidden","addEventListener","event","preventDefault","searchMovieTrim","target","elements","navigation__input","value","trim","console","log","$7ecca67214b608f8$var$modalLinkEl","getElementById","$7ecca67214b608f8$var$modalEl","toggle","$8a7e756c566dd1ea$var$refs","openModalBtn","closeModalBtn","backdrop","$8a7e756c566dd1ea$var$offCloseModal","window","removeEventListener","$8a7e756c566dd1ea$var$onEscKeyPress","e","code","currentTarget","onload","body","setTimeout","$2ce415f148c0c897$var$fetchOptions","moviesPerPage","currentPage","searchMovie","IntersectionObserver","entries","forEach","entry","isIntersecting","fetchTrendingMovies","insertAdjacentHTML","Notify","failure","rootMargin","threshold"],"version":3,"file":"index-lib.9ff3da43.js.map"}