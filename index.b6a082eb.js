!function(){function e(e){return e&&e.__esModule?e.default:e}var r="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},n={},o=r.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in n){var r=n[e];delete n[e];var o={id:e,exports:{}};return t[e]=o,r.call(o.exports,o,o.exports),o.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,r){n[e]=r},r.parcelRequired7c6=o);var a,i=o("bpxeT"),s=o("2TvXO"),c=o("i3Qnx"),u=(i=o("bpxeT"),s=o("2TvXO"),a=e(i)(e(s).mark((function r(t){var n;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t.show(),e.next=4,fetch("https://api.themoviedb.org/3/trending/movie/week?api_key=ff98b74c6ada2972698b8eff6707845a&page=".concat(p.currentPage));case 4:return n=e.sent,t.hide(),e.abrupt("return",n.json());case 9:throw e.prev=9,e.t0=e.catch(0),Error(response.statusText);case 12:case"end":return e.stop()}}),r,null,[[0,9]])}))),function(e){return a.apply(this,arguments)}),l=o("4Nugj"),d={};Object.defineProperty(d,"__esModule",{value:!0}),d.default=function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")};var f={};function h(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(e,r,t){r&&h(e.prototype,r);t&&h(e,t);return e};var v=function(){"use strict";function r(t){var n=t.hidden,o=void 0!==n&&n;e(d)(this,r),this.refs=this.getRefs(),o&&this.hide()}return e(f)(r,[{key:"getRefs",value:function(){var e={};return e.loader=document.querySelector(".loader"),e}},{key:"show",value:function(){this.refs.loader.classList.remove("is-hidden")}},{key:"hide",value:function(){this.refs.loader.classList.add("is-hidden")}}]),r}(),p={currentPage:1,currentQueryPage:1},g=new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&(u(b).then((function(e){try{if(p.currentPage===e.total_pages)return l.refs.gallery.insertAdjacentHTML("beforeend",(0,c.createMovieCard)(e.results)),window.alert("Sorry this is the last page, we do not have any movies for you :("),void y();p.currentPage+=1,l.refs.gallery.insertAdjacentHTML("beforeend",(0,c.createMovieCard)(e.results))}catch(e){console.log(e)}})),console.log("is intersecting"))}))}),{rootMargin:"0px",threshold:1});function y(){g.unobserve(document.querySelector(".scroll-check"))}g.observe(document.querySelector(".scroll-check"));var b=new v({loader:".loader",hidden:!0});var w=function(){var r=e(i)(e(s).mark((function r(t){var n;return e(s).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("\n        https://api.themoviedb.org/3/search/movie?api_key=ff98b74c6ada2972698b8eff6707845a&language=en-US&page=".concat(p.currentQueryPage,"&include_adult=false&query=").concat(t));case 3:return n=e.sent,p.currentQueryPage+=1,y(),e.next=8,n.json();case 8:return e.abrupt("return",e.sent);case 11:throw e.prev=11,e.t0=e.catch(0),Error(response.statusText);case 14:case"end":return e.stop()}}),r,null,[[0,11]])})));return function(e){return r.apply(this,arguments)}}();c=o("i3Qnx"),l=o("4Nugj"),c=o("i3Qnx"),l=o("4Nugj"),new v({loader:".loader",hidden:!0});var m=new v({loader:".loader",hidden:!0}),x="";l.refs.form.addEventListener("submit",(function(e){e.preventDefault();var r=e.target.elements.navigation__input.value;x=r.trim(),w(x).then((function(e){""===x||0===e.results.length?(l.refs.notificate.classList.remove("navigation__notificate-hidden"),document.getElementById("myForm").reset(),setTimeout((function(){l.refs.notificate.classList.add("navigation__notificate-hidden")}),5e3)):l.refs.gallery.innerHTML=(0,c.createMovieCard)(e.results),m.show()}));new IntersectionObserver((function(e){e.forEach((function(e){e.isIntersecting&&(y(),w(x).then((function(e){try{l.refs.gallery.insertAdjacentHTML("beforeend",(0,c.createMovieCard)(e.results))}catch(e){console.log(e)}})))}))}),{rootMargin:"-100px",threshold:1}).observe(document.querySelector(".scroll-check"))})),o("3likm"),o("4smAb"),o("6Sco9"),o("lqpIw"),o("1fJqo")}();
//# sourceMappingURL=index.b6a082eb.js.map
