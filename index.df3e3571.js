var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},r={},o=e.parcelRequired7c6;null==o&&((o=function(e){if(e in t)return t[e].exports;if(e in r){var o=r[e];delete r[e];var n={id:e,exports:{}};return t[e]=n,o.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){r[e]=t},e.parcelRequired7c6=o),o("2ix2C");var n=o("csVsy"),s=o("krGWQ");class a{getRefs(){const e={};return e.loader=document.querySelector(".loader"),e}show(){this.refs.loader.classList.remove("is-hidden")}hide(){this.refs.loader.classList.add("is-hidden")}constructor({hidden:e=!1}){this.refs=this.getRefs(),e&&this.hide()}}let l={currentPage:1,currentQueryPage:1};const c=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(u(d).then((e=>{try{if(l.currentPage===e.total_pages)return s.refs.gallery.insertAdjacentHTML("beforeend",(0,n.createMovieCard)(e.results)),s.refs.gallery.insertAdjacentHTML("afterend","Sorry this is the last page, we do not have any movies for you :("),void i();l.currentPage+=1,s.refs.gallery.insertAdjacentHTML("beforeend",(0,n.createMovieCard)(e.results))}catch(e){console.log(e)}})),console.log("is intersecting"))}))}),{rootMargin:"0px",threshold:1});function i(){c.unobserve(document.querySelector(".scroll-check"))}c.observe(document.querySelector(".scroll-check"));const d=new a({loader:".loader",hidden:!0});const u=async e=>{try{console.log(l.currentPage),e.show();const t=await fetch(`https://api.themoviedb.org/3/trending/movie/week?api_key=ff98b74c6ada2972698b8eff6707845a&page=${l.currentPage}`);return e.hide(),t.json()}catch(e){throw Error(response.statusText)}},g=async e=>{try{const t=await fetch(`\n        https://api.themoviedb.org/3/search/movie?api_key=ff98b74c6ada2972698b8eff6707845a&language=en-US&page=${l.currentQueryPage}&include_adult=false&query=${e}`);return l.currentQueryPage+=1,i(),await t.json()}catch(e){throw Error(response.statusText)}};n=o("csVsy"),s=o("krGWQ"),n=o("csVsy"),s=o("krGWQ");let h={currentPage:1,currentQueryPage:1};const f=new a({loader:".loader",hidden:!0});const m=new a({loader:".loader",hidden:!0});let y="";s.refs.form.addEventListener("submit",(e=>{e.preventDefault();let t=e.target.elements.navigation__input.value;y=t.trim(),g(y).then((e=>{""===y||0===e.results.length?(s.refs.notificate.classList.remove("navigation__notificate-hidden"),document.getElementById("myForm").reset(),setTimeout((()=>{s.refs.notificate.classList.add("navigation__notificate-hidden")}),5e3)):s.refs.gallery.innerHTML=(0,n.createMovieCard)(e.results),m.show()}));new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&(i(),g(y).then((e=>{try{h.currentQueryPage===e.total_pages&&(s.refs.gallery.insertAdjacentHTML("beforeend",(0,n.createMovieCard)(e.results)),s.refs.gallery.insertAdjacentHTML("afterend","Sorry this is the last page, we do not have any movies for you :("),f.hide()),s.refs.gallery.insertAdjacentHTML("beforeend",(0,n.createMovieCard)(e.results))}catch(e){console.log(e)}})))}))}),{rootMargin:"-100px",threshold:1}).observe(document.querySelector(".scroll-check"))}));const v=document.getElementById("modalTeam"),p=document.querySelector(".modal-team");v.addEventListener("click",(function(e){e.preventDefault(),p.classList.toggle("visually-hidden"),p.addEventListener("keydown")})),o("7zQK0"),o("ioBS9"),o("bOFJ0"),o("TEBOm"),o("6dDzJ");const b=document.querySelector(".top_button");window.onscroll=function(){document.body.scrollTop>700||document.documentElement.scrollTop>700?b.classList.remove("is-hidden"):b.classList.add("is-hidden")},b.addEventListener("click",(function(){document.body.scrollTop=0,document.documentElement.scrollTop=0}));s=o("krGWQ");let L=localStorage.getItem("darkTheme");const w=document.querySelector("#dark-theme"),k=()=>{s.refs.theme.classList.add("darktheme"),localStorage.setItem("darkTheme","enabled")};w.addEventListener("click",(()=>{L=localStorage.getItem("darkTheme"),"enabled"!==L?k():(s.refs.theme.classList.remove("darktheme"),localStorage.setItem("darkTheme",null))}));const T=document.querySelector(".light"),E=document.querySelector(".dark");w.addEventListener("click",(()=>{T.classList.toggle("visible"),E.classList.toggle("visible")})),"enabled"===L&&(k(),T.classList.toggle("visible"),E.classList.toggle("visible"));
//# sourceMappingURL=index.df3e3571.js.map
